

<!DOCTYPE html>
<html lang="zh-CN" data-default-color-scheme=auto>



<head>
  <meta charset="UTF-8">
  <link rel="apple-touch-icon" sizes="76x76" href="/img/fluid.jpg">
  <link rel="icon" href="/img/fluid.jpg">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="author" content="Ysc">
  <meta name="keywords" content="">
  
    <meta name="description" content="自动配置i3的程序">
<meta property="og:type" content="article">
<meta property="og:title" content="i3自动安装">
<meta property="og:url" content="https://ysc2.github.io/ysc2.github.io/2024/03/03/i3%E8%87%AA%E5%8A%A8%E5%AE%89%E8%A3%85/index.html">
<meta property="og:site_name" content="Ysc Web">
<meta property="og:description" content="自动配置i3的程序">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://picgo-ysc.oss-cn-shenzhen.aliyuncs.com/web/wallhaven-zm36wg.jpg">
<meta property="article:published_time" content="2024-03-03T07:23:33.000Z">
<meta property="article:modified_time" content="2024-03-04T12:00:17.972Z">
<meta property="article:author" content="Ysc">
<meta property="article:tag" content="转载">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="https://picgo-ysc.oss-cn-shenzhen.aliyuncs.com/web/wallhaven-zm36wg.jpg">
  
  
  
  <title>i3自动安装 - Ysc Web</title>

  <link  rel="stylesheet" href="https://lib.baomitu.com/twitter-bootstrap/4.6.1/css/bootstrap.min.css" />



  <link  rel="stylesheet" href="https://lib.baomitu.com/github-markdown-css/4.0.0/github-markdown.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/hint.css/2.7.0/hint.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css" />



<!-- 主题依赖的图标库，不要自行修改 -->
<!-- Do not modify the link that theme dependent icons -->

<link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_hj8rtnfg7um.css">



<link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_lbnruvf0jn.css">


<link  rel="stylesheet" href="/css/main.css" />


  <link id="highlight-css" rel="stylesheet" href="/css/highlight.css" />
  
    <link id="highlight-css-dark" rel="stylesheet" href="/css/highlight-dark.css" />
  




  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    Fluid.ctx = Object.assign({}, Fluid.ctx)
    var CONFIG = {"hostname":"ysc2.github.io","root":"/","version":"1.9.5","typing":{"enable":true,"typeSpeed":70,"cursorChar":"_","loop":false,"scope":[]},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"left","visible":"hover","icon":""},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"code_language":{"enable":true,"default":"c"},"copy_btn":true,"image_caption":{"enable":true},"image_zoom":{"enable":true,"img_url_replace":["",""]},"toc":{"enable":true,"placement":"right","headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"loading_img":"/img/loading.gif","onlypost":false,"offset_factor":2},"web_analytics":{"enable":false,"follow_dnt":true,"baidu":null,"google":{"measurement_id":null},"tencent":{"sid":null,"cid":null},"woyaola":null,"cnzz":null,"leancloud":{"app_id":null,"app_key":null,"server_url":null,"path":"window.location.pathname","ignore_local":false}},"search_path":"/local-search.xml","include_content_in_search":true};

    if (CONFIG.web_analytics.follow_dnt) {
      var dntVal = navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack;
      Fluid.ctx.dnt = dntVal && (dntVal.startsWith('1') || dntVal.startsWith('yes') || dntVal.startsWith('on'));
    }
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>
  


  
<meta name="generator" content="Hexo 6.3.0"></head>


<body>
  

  <header>
    

<div class="header-inner" style="height: 70vh;">
  <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand" href="/">
      <strong>Ysc博客</strong>
    </a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/">
                <i class="iconfont icon-home-fill"></i>
                <span>首页</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/">
                <i class="iconfont icon-archive-fill"></i>
                <span>归档</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/">
                <i class="iconfont icon-category-fill"></i>
                <span>分类</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/tags/">
                <i class="iconfont icon-tags-fill"></i>
                <span>标签</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/">
                <i class="iconfont icon-user-fill"></i>
                <span>关于</span>
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search">
              <i class="iconfont icon-search"></i>
            </a>
          </li>
          
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle">
              <i class="iconfont icon-dark" id="color-toggle-icon"></i>
            </a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

  

<div id="banner" class="banner" parallax=true
     style="background: url('https://picgo-ysc.oss-cn-shenzhen.aliyuncs.com/web/wallhaven-zm36wg.jpg') no-repeat center center; background-size: cover;">
  <div class="full-bg-img">
    <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
      <div class="banner-text text-center fade-in-up">
        <div class="h2">
          
            <span id="subtitle" data-typed-text="i3自动安装"></span>
          
        </div>

        
          
  <div class="mt-3">
    
    
      <span class="post-meta">
        <i class="iconfont icon-date-fill" aria-hidden="true"></i>
        <time datetime="2024-03-03 15:23" pubdate>
          2024年3月3日 下午
        </time>
      </span>
    
  </div>

  <div class="mt-1">
    
      <span class="post-meta mr-2">
        <i class="iconfont icon-chart"></i>
        
          53k 字
        
      </span>
    

    
      <span class="post-meta mr-2">
        <i class="iconfont icon-clock-fill"></i>
        
        
        
          439 分钟
        
      </span>
    

    
    
  </div>


        
      </div>

      
    </div>
  </div>
</div>

</div>

  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="side-col d-none d-lg-block col-lg-2">
      

    </div>

    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div id="board">
          <article class="post-content mx-auto">
            <h1 id="seo-header">i3自动安装</h1>
            
            
              <div class="markdown-body">
                
                <p>自动配置i3的程序</p>
<span id="more"></span>

<h1 id="什么是i3"><a href="#什么是i3" class="headerlink" title="什么是i3"></a>什么是i3</h1><p>i3-wm 是一种动态的平铺式窗口管理器，它的设计目标是提供一个快速、简洁、可定制的桌面环境，适合开发者和高级用户使用。它有以下几个特点：</p>
<p>它使用树形结构来管理窗口，可以灵活地分割、组合、切换窗口。<br>它支持多种操作模式，类似于 vim，可以通过快捷键执行各种命令。<br>它支持多显示器，可以在不同的输出设备上创建和移动工作区。<br>它有丰富的生态系统，可以与其他桌面环境集成，或者使用第三方的工具来增强 i3-wm 的外观和体验。<br>i3-wm 可以在多数 Linux 发行版中安装，通常包名为 i3-wm 或 i3 的名称。安装后，可以通过 tty 或显示管理器来启动 i3-wm 环境。</p>
<p>说明一下在 i3 中经常遇到的 i3-wm 和 i3-gaps 含义：</p>
<p>i3-wm 是 i3 窗口管理器的官方名称，它是一个轻量级、快速且高度可定制的窗口管理器。”wm” 代表窗口管理器（Window Manager），这是它的主要功能。i3-wm使用平铺式窗口管理，意味着窗口默认以平铺的方式在屏幕上排列，不重叠。用户可以使用键盘快捷键来进行窗口的切换、移动和调整大小等操作，而不需要使用鼠标。</p>
<p>i3-gaps 是 i3 窗口管理器的一个分支，它在 i3-wm 的基础上增加了一个有趣的功能：窗口间的间隙。这意味着在 i3-gaps 中，窗口之间可以留有一些空隙，使得用户可以更好地区分窗口。这是 i3-gaps 与 i3-wm 之间的主要区别。在 i3-wm 中，窗口紧密排列，没有间隙；而在 i3-gaps 中，你可以通过配置增加窗口之间的间隙。这使得 i3-gaps 更受一些用户喜爱，尤其是那些喜欢自定义和视觉效果的用户。<br>相信你在网络上看到的说明大多数是这样，说点不一样的新消息：i3-gaps 被合并了</p>
<h1 id="图形用户界面（GUI）"><a href="#图形用户界面（GUI）" class="headerlink" title="图形用户界面（GUI）"></a>图形用户界面（GUI）</h1><p>图形用户界面（GUI）中的三个概念：桌面环境（DE）、窗口管理器（WM）、显示管理器（DM）</p>
<p>桌面环境（DE）：</p>
<p>桌面环境是最上层的图形用户界面，为用户提供了一个集成的、直观的桌面体验。DE通常包含窗口管理器、文件管理器、面板、系统托盘、启动器、图标、主题、壁纸等元素，以及一系列预装的应用程序，如文本编辑器、终端仿真器、邮件客户端等。流行的桌面环境包括 GNOME、KDE Plasma、XFCE、Cinnamon 等。桌面环境为用户提供了一个全面的、易于使用的界面，适用于不同水平的用户。</p>
<p>窗口管理器（WM）：</p>
<p>窗口管理器是桌面环境的一个组成部分，负责管理图形界面中各个窗口的显示、移动、调整大小和关闭等操作。它负责处理窗口的外观、布局和交互，使用户可以通过鼠标和键盘与窗口进行交互。窗口管理器通常提供窗口标题栏、边框和控制按钮（最小化、最大化、关闭等），同时还支持窗口的层叠、平铺和堆叠等布局方式。一些流行的窗口管理器包括 Metacity、KWin、Openbox、i3 等。</p>
<p>显示管理器（DM）：</p>
<p>显示管理器是启动时出现的登录界面，它提供了一个用户登录到图形桌面环境的方式。当计算机启动时，显示管理器负责呈现一个登录屏幕，用户可以在该屏幕上输入用户名和密码，选择桌面环境，然后会话将启动并加载相应的桌面环境。显示管理器简化了用户登录过程，同时还支持多个用户账号。常见的显示管理器包括 GDM（GNOME Display Manager）、LightDM、SDDM（Simple Desktop Display Manager）等。</p>
<p>三者关系：</p>
<p>WM 是 DE 的一部分，负责处理窗口的布局、外观和交互。<br>DM 是用户登录到桌面环境的入口。它出现在计算机启动时，用户选择桌面环境后，DM 会加载相应的 DE 和 WM 相关程序。<br>重点：实际上非常奇妙的操作，我们可以在根本不需要 GNOME、KDE Plasma、XFCE 桌面环境下直接骚操作使用 i3-wm 窗口管理器</p>
<h1 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h1><p>今天分享一下个人的I3wm桌面，初步配置情况已经实现脚本化配置，并且实现了自动适配分辨率(4K&#x2F;2K&#x2F;1080p)屏幕，减少了很多重复配置的无效工作。</p>
<h1 id="切换i3wm桌面"><a href="#切换i3wm桌面" class="headerlink" title="切换i3wm桌面"></a>切换i3wm桌面</h1><p>切换到I3窗口管理器分两种情况：</p>
<p>初始系统无X窗口系统： 即之前没有安装过任何桌面环境，这种就是从零开始安装X窗口系统。<br>基于现有桌面环境切换为I3窗口管理器： 省去安装X窗口系统的前提，直接安装i3wm窗口管理器然后配置即可。<br>让我们比较一下这两种情况切换到 i3 窗口管理器的优缺点。</p>
<ol>
<li>初始系统无X窗口系统：</li>
</ol>
<p>优点：<br>最干净的安装：从零开始安装 X 窗口系统，没有任何额外的桌面环境或软件包。<br>资源利用率低：因为没有其他桌面环境，只安装了最少的必要组件，所以系统资源利用率较低。<br>自定义性高：从零开始，可以完全根据个人喜好和需求进行定制。<br>缺点：<br>学习曲线较陡：对于没有经验的用户来说，从零开始安装 X 窗口系统并配置 i3 可能会有一定的学习曲线。<br>配置工作量较大：因为从零开始，你需要手动安装和配置 X 窗口系统以及其他必要的组件。<br>2. 基于现有桌面环境切换为 i3 窗口管理器：</p>
<p>优点：<br>简化安装过程：不需要安装整个 X 窗口系统，可以直接安装 i3 窗口管理器。<br>利用现有环境：可以利用已经安装的桌面环境的设置和依赖项，减少配置工作量。<br>逐步过渡：可以先尝试 i3 窗口管理器，逐步习惯并切换到全面使用。<br><br><br>缺点：<br>可能存在冲突：如果现有的桌面环境和 i3 窗口管理器之间有冲突，可能需要解决冲突或调整设置。<br>可能存在额外资源占用：由于现有桌面环境的存在，可能会占用额外的系统资源。<br>综上，初始系统无 X 窗口系统的方法更适合那些希望从零开始、完全自定义和精简系统的用户。虽然有一些学习和配置的成本，但可以获得最大的灵活性。另一方面，基于现有桌面环境切换为 i3 窗口管理器的方法更适合那些想要简化安装过程并逐步过渡到 i3 的用户。它可以利用现有环境，并且相对较少的配置工作。选择哪种方法取决于个人的偏好、时间和技术水平。</p>
<h1 id="开始安装i3窗口管理器"><a href="#开始安装i3窗口管理器" class="headerlink" title="开始安装i3窗口管理器"></a>开始安装i3窗口管理器</h1><p>经过一段时间的学习，基本掌握的大部分的i3wm配置规则，同时也编写了一个i3config脚本工具帮助自动化配置i3桌面环境，这样可以省去了非常多的手工配置时间。接下来，我们来看下如何使用i3config工具吧。</p>
<p>首先，获取下载i3config脚本命令:</p>
<h1 id="使用-curl-或者-wget-命令快速下载-i3config命令"><a href="#使用-curl-或者-wget-命令快速下载-i3config命令" class="headerlink" title="使用 curl 或者 wget 命令快速下载 i3config命令"></a>使用 curl 或者 wget 命令快速下载 i3config命令</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs zsh">curl -L -o i3config https://raw.githubusercontent.com/switchToLinux/dotfiles/main/i3config<br><br>wget -O i3config https://raw.githubusercontent.com/switchToLinux/dotfiles/main/i3config<br><br>chmod +x i3config<br>./i3config<br></code></pre></td></tr></table></figure>

<p>第二步，安装i3wm桌面环境，根据菜单选择z自动化安装，自动化从源码编译安装一系列的软件，同时会自动配置好桌面环境。</p>
<p>第三步，安装完成，做一次重启系统，不出意外的话就可以进入登录界面。</p>
<p>目前，此脚本在openSUSE&#x2F;debian&#x2F;ubuntu&#x2F;fedora38上测试通过，更多功能还在开发中。</p>
<h1 id="自动下载文件"><a href="#自动下载文件" class="headerlink" title="自动下载文件"></a>自动下载文件</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br><span class="line">467</span><br><span class="line">468</span><br><span class="line">469</span><br><span class="line">470</span><br><span class="line">471</span><br><span class="line">472</span><br><span class="line">473</span><br><span class="line">474</span><br><span class="line">475</span><br><span class="line">476</span><br><span class="line">477</span><br><span class="line">478</span><br><span class="line">479</span><br><span class="line">480</span><br><span class="line">481</span><br><span class="line">482</span><br><span class="line">483</span><br><span class="line">484</span><br><span class="line">485</span><br><span class="line">486</span><br><span class="line">487</span><br><span class="line">488</span><br><span class="line">489</span><br><span class="line">490</span><br><span class="line">491</span><br><span class="line">492</span><br><span class="line">493</span><br><span class="line">494</span><br><span class="line">495</span><br><span class="line">496</span><br><span class="line">497</span><br><span class="line">498</span><br><span class="line">499</span><br><span class="line">500</span><br><span class="line">501</span><br><span class="line">502</span><br><span class="line">503</span><br><span class="line">504</span><br><span class="line">505</span><br><span class="line">506</span><br><span class="line">507</span><br><span class="line">508</span><br><span class="line">509</span><br><span class="line">510</span><br><span class="line">511</span><br><span class="line">512</span><br><span class="line">513</span><br><span class="line">514</span><br><span class="line">515</span><br><span class="line">516</span><br><span class="line">517</span><br><span class="line">518</span><br><span class="line">519</span><br><span class="line">520</span><br><span class="line">521</span><br><span class="line">522</span><br><span class="line">523</span><br><span class="line">524</span><br><span class="line">525</span><br><span class="line">526</span><br><span class="line">527</span><br><span class="line">528</span><br><span class="line">529</span><br><span class="line">530</span><br><span class="line">531</span><br><span class="line">532</span><br><span class="line">533</span><br><span class="line">534</span><br><span class="line">535</span><br><span class="line">536</span><br><span class="line">537</span><br><span class="line">538</span><br><span class="line">539</span><br><span class="line">540</span><br><span class="line">541</span><br><span class="line">542</span><br><span class="line">543</span><br><span class="line">544</span><br><span class="line">545</span><br><span class="line">546</span><br><span class="line">547</span><br><span class="line">548</span><br><span class="line">549</span><br><span class="line">550</span><br><span class="line">551</span><br><span class="line">552</span><br><span class="line">553</span><br><span class="line">554</span><br><span class="line">555</span><br><span class="line">556</span><br><span class="line">557</span><br><span class="line">558</span><br><span class="line">559</span><br><span class="line">560</span><br><span class="line">561</span><br><span class="line">562</span><br><span class="line">563</span><br><span class="line">564</span><br><span class="line">565</span><br><span class="line">566</span><br><span class="line">567</span><br><span class="line">568</span><br><span class="line">569</span><br><span class="line">570</span><br><span class="line">571</span><br><span class="line">572</span><br><span class="line">573</span><br><span class="line">574</span><br><span class="line">575</span><br><span class="line">576</span><br><span class="line">577</span><br><span class="line">578</span><br><span class="line">579</span><br><span class="line">580</span><br><span class="line">581</span><br><span class="line">582</span><br><span class="line">583</span><br><span class="line">584</span><br><span class="line">585</span><br><span class="line">586</span><br><span class="line">587</span><br><span class="line">588</span><br><span class="line">589</span><br><span class="line">590</span><br><span class="line">591</span><br><span class="line">592</span><br><span class="line">593</span><br><span class="line">594</span><br><span class="line">595</span><br><span class="line">596</span><br><span class="line">597</span><br><span class="line">598</span><br><span class="line">599</span><br><span class="line">600</span><br><span class="line">601</span><br><span class="line">602</span><br><span class="line">603</span><br><span class="line">604</span><br><span class="line">605</span><br><span class="line">606</span><br><span class="line">607</span><br><span class="line">608</span><br><span class="line">609</span><br><span class="line">610</span><br><span class="line">611</span><br><span class="line">612</span><br><span class="line">613</span><br><span class="line">614</span><br><span class="line">615</span><br><span class="line">616</span><br><span class="line">617</span><br><span class="line">618</span><br><span class="line">619</span><br><span class="line">620</span><br><span class="line">621</span><br><span class="line">622</span><br><span class="line">623</span><br><span class="line">624</span><br><span class="line">625</span><br><span class="line">626</span><br><span class="line">627</span><br><span class="line">628</span><br><span class="line">629</span><br><span class="line">630</span><br><span class="line">631</span><br><span class="line">632</span><br><span class="line">633</span><br><span class="line">634</span><br><span class="line">635</span><br><span class="line">636</span><br><span class="line">637</span><br><span class="line">638</span><br><span class="line">639</span><br><span class="line">640</span><br><span class="line">641</span><br><span class="line">642</span><br><span class="line">643</span><br><span class="line">644</span><br><span class="line">645</span><br><span class="line">646</span><br><span class="line">647</span><br><span class="line">648</span><br><span class="line">649</span><br><span class="line">650</span><br><span class="line">651</span><br><span class="line">652</span><br><span class="line">653</span><br><span class="line">654</span><br><span class="line">655</span><br><span class="line">656</span><br><span class="line">657</span><br><span class="line">658</span><br><span class="line">659</span><br><span class="line">660</span><br><span class="line">661</span><br><span class="line">662</span><br><span class="line">663</span><br><span class="line">664</span><br><span class="line">665</span><br><span class="line">666</span><br><span class="line">667</span><br><span class="line">668</span><br><span class="line">669</span><br><span class="line">670</span><br><span class="line">671</span><br><span class="line">672</span><br><span class="line">673</span><br><span class="line">674</span><br><span class="line">675</span><br><span class="line">676</span><br><span class="line">677</span><br><span class="line">678</span><br><span class="line">679</span><br><span class="line">680</span><br><span class="line">681</span><br><span class="line">682</span><br><span class="line">683</span><br><span class="line">684</span><br><span class="line">685</span><br><span class="line">686</span><br><span class="line">687</span><br><span class="line">688</span><br><span class="line">689</span><br><span class="line">690</span><br><span class="line">691</span><br><span class="line">692</span><br><span class="line">693</span><br><span class="line">694</span><br><span class="line">695</span><br><span class="line">696</span><br><span class="line">697</span><br><span class="line">698</span><br><span class="line">699</span><br><span class="line">700</span><br><span class="line">701</span><br><span class="line">702</span><br><span class="line">703</span><br><span class="line">704</span><br><span class="line">705</span><br><span class="line">706</span><br><span class="line">707</span><br><span class="line">708</span><br><span class="line">709</span><br><span class="line">710</span><br><span class="line">711</span><br><span class="line">712</span><br><span class="line">713</span><br><span class="line">714</span><br><span class="line">715</span><br><span class="line">716</span><br><span class="line">717</span><br><span class="line">718</span><br><span class="line">719</span><br><span class="line">720</span><br><span class="line">721</span><br><span class="line">722</span><br><span class="line">723</span><br><span class="line">724</span><br><span class="line">725</span><br><span class="line">726</span><br><span class="line">727</span><br><span class="line">728</span><br><span class="line">729</span><br><span class="line">730</span><br><span class="line">731</span><br><span class="line">732</span><br><span class="line">733</span><br><span class="line">734</span><br><span class="line">735</span><br><span class="line">736</span><br><span class="line">737</span><br><span class="line">738</span><br><span class="line">739</span><br><span class="line">740</span><br><span class="line">741</span><br><span class="line">742</span><br><span class="line">743</span><br><span class="line">744</span><br><span class="line">745</span><br><span class="line">746</span><br><span class="line">747</span><br><span class="line">748</span><br><span class="line">749</span><br><span class="line">750</span><br><span class="line">751</span><br><span class="line">752</span><br><span class="line">753</span><br><span class="line">754</span><br><span class="line">755</span><br><span class="line">756</span><br><span class="line">757</span><br><span class="line">758</span><br><span class="line">759</span><br><span class="line">760</span><br><span class="line">761</span><br><span class="line">762</span><br><span class="line">763</span><br><span class="line">764</span><br><span class="line">765</span><br><span class="line">766</span><br><span class="line">767</span><br><span class="line">768</span><br><span class="line">769</span><br><span class="line">770</span><br><span class="line">771</span><br><span class="line">772</span><br><span class="line">773</span><br><span class="line">774</span><br><span class="line">775</span><br><span class="line">776</span><br><span class="line">777</span><br><span class="line">778</span><br><span class="line">779</span><br><span class="line">780</span><br><span class="line">781</span><br><span class="line">782</span><br><span class="line">783</span><br><span class="line">784</span><br><span class="line">785</span><br><span class="line">786</span><br><span class="line">787</span><br><span class="line">788</span><br><span class="line">789</span><br><span class="line">790</span><br><span class="line">791</span><br><span class="line">792</span><br><span class="line">793</span><br><span class="line">794</span><br><span class="line">795</span><br><span class="line">796</span><br><span class="line">797</span><br><span class="line">798</span><br><span class="line">799</span><br><span class="line">800</span><br><span class="line">801</span><br><span class="line">802</span><br><span class="line">803</span><br><span class="line">804</span><br><span class="line">805</span><br><span class="line">806</span><br><span class="line">807</span><br><span class="line">808</span><br><span class="line">809</span><br><span class="line">810</span><br><span class="line">811</span><br><span class="line">812</span><br><span class="line">813</span><br><span class="line">814</span><br><span class="line">815</span><br><span class="line">816</span><br><span class="line">817</span><br><span class="line">818</span><br><span class="line">819</span><br><span class="line">820</span><br><span class="line">821</span><br><span class="line">822</span><br><span class="line">823</span><br><span class="line">824</span><br><span class="line">825</span><br><span class="line">826</span><br><span class="line">827</span><br><span class="line">828</span><br><span class="line">829</span><br><span class="line">830</span><br><span class="line">831</span><br><span class="line">832</span><br><span class="line">833</span><br><span class="line">834</span><br><span class="line">835</span><br><span class="line">836</span><br><span class="line">837</span><br><span class="line">838</span><br><span class="line">839</span><br><span class="line">840</span><br><span class="line">841</span><br><span class="line">842</span><br><span class="line">843</span><br><span class="line">844</span><br><span class="line">845</span><br><span class="line">846</span><br><span class="line">847</span><br><span class="line">848</span><br><span class="line">849</span><br><span class="line">850</span><br><span class="line">851</span><br><span class="line">852</span><br><span class="line">853</span><br><span class="line">854</span><br><span class="line">855</span><br><span class="line">856</span><br><span class="line">857</span><br><span class="line">858</span><br><span class="line">859</span><br><span class="line">860</span><br><span class="line">861</span><br><span class="line">862</span><br><span class="line">863</span><br><span class="line">864</span><br><span class="line">865</span><br><span class="line">866</span><br><span class="line">867</span><br><span class="line">868</span><br><span class="line">869</span><br><span class="line">870</span><br><span class="line">871</span><br><span class="line">872</span><br><span class="line">873</span><br><span class="line">874</span><br><span class="line">875</span><br><span class="line">876</span><br><span class="line">877</span><br><span class="line">878</span><br><span class="line">879</span><br><span class="line">880</span><br><span class="line">881</span><br><span class="line">882</span><br><span class="line">883</span><br><span class="line">884</span><br><span class="line">885</span><br><span class="line">886</span><br><span class="line">887</span><br><span class="line">888</span><br><span class="line">889</span><br><span class="line">890</span><br><span class="line">891</span><br><span class="line">892</span><br><span class="line">893</span><br><span class="line">894</span><br><span class="line">895</span><br><span class="line">896</span><br><span class="line">897</span><br><span class="line">898</span><br><span class="line">899</span><br><span class="line">900</span><br><span class="line">901</span><br><span class="line">902</span><br><span class="line">903</span><br><span class="line">904</span><br><span class="line">905</span><br><span class="line">906</span><br><span class="line">907</span><br><span class="line">908</span><br><span class="line">909</span><br><span class="line">910</span><br><span class="line">911</span><br><span class="line">912</span><br><span class="line">913</span><br><span class="line">914</span><br><span class="line">915</span><br><span class="line">916</span><br><span class="line">917</span><br><span class="line">918</span><br><span class="line">919</span><br><span class="line">920</span><br><span class="line">921</span><br><span class="line">922</span><br><span class="line">923</span><br><span class="line">924</span><br><span class="line">925</span><br><span class="line">926</span><br><span class="line">927</span><br><span class="line">928</span><br><span class="line">929</span><br><span class="line">930</span><br><span class="line">931</span><br><span class="line">932</span><br><span class="line">933</span><br><span class="line">934</span><br><span class="line">935</span><br><span class="line">936</span><br><span class="line">937</span><br><span class="line">938</span><br><span class="line">939</span><br><span class="line">940</span><br><span class="line">941</span><br><span class="line">942</span><br><span class="line">943</span><br><span class="line">944</span><br><span class="line">945</span><br><span class="line">946</span><br><span class="line">947</span><br><span class="line">948</span><br><span class="line">949</span><br><span class="line">950</span><br><span class="line">951</span><br><span class="line">952</span><br><span class="line">953</span><br><span class="line">954</span><br><span class="line">955</span><br><span class="line">956</span><br><span class="line">957</span><br><span class="line">958</span><br><span class="line">959</span><br><span class="line">960</span><br><span class="line">961</span><br><span class="line">962</span><br><span class="line">963</span><br><span class="line">964</span><br><span class="line">965</span><br><span class="line">966</span><br><span class="line">967</span><br><span class="line">968</span><br><span class="line">969</span><br><span class="line">970</span><br><span class="line">971</span><br><span class="line">972</span><br><span class="line">973</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-meta">#!/usr/bin/env bash</span><br><span class="hljs-comment">########################################################################</span><br><span class="hljs-comment"># File Name: i3config</span><br><span class="hljs-comment"># Author: Awkee</span><br><span class="hljs-comment"># mail: next4nextjob@gmail.com</span><br><span class="hljs-comment"># Created Time: 2023年 06月 15日 星期四 19:28:08 CST</span><br><span class="hljs-comment">#</span><br><span class="hljs-comment"># 非强制性约束: 网络下载使用curl命令而不用wget，没有任何歧视含义，仅处于统一要求</span><br><span class="hljs-comment">#</span><br><span class="hljs-comment"># 功能简述:  个人Linux桌面环境配置工具</span><br><span class="hljs-comment">########################################################################</span><br><span class="hljs-comment"># set -e              # 命令执行失败就中止继续执行</span><br><span class="hljs-comment"># 环境变量参数:</span><br><span class="hljs-comment">#   OUTPUTLOG - no 表示只输出日志信息到文件中,不在终端显示，默认为 yes(终端显示)</span><br><span class="hljs-comment">#</span><br>I3CONFIG_VERSION=<span class="hljs-string">&quot;v0.1.3&quot;</span><br>dotfiles_path=<span class="hljs-variable">$HOME</span>/.config/dotfiles<br><br><span class="hljs-built_in">source</span> ~/.bashrc<br><br><span class="hljs-comment">#### 默认选项 #####</span><br>default_confirm=<span class="hljs-string">&quot;no&quot;</span>    <span class="hljs-comment"># 是否提示确认，no-提示，yes-自动选择yes</span><br>PMT=<span class="hljs-string">&quot;&gt;&gt;&gt;&quot;</span><br><span class="hljs-keyword">if</span> [ <span class="hljs-string">&quot;<span class="hljs-variable">$OUTPUTLOG</span>&quot;</span> = <span class="hljs-string">&quot;&quot;</span> ] ; <span class="hljs-keyword">then</span><br>    OUTPUTLOG=<span class="hljs-string">&quot;yes&quot;</span>  <span class="hljs-comment"># 默认输出日志内容到 stdout</span><br><span class="hljs-keyword">fi</span><br><br><br>curl_cmd=<span class="hljs-string">&quot;curl -C - &quot;</span>  <span class="hljs-comment"># 支持断点继续下载</span><br><br><span class="hljs-comment"># Define Colors</span><br>RED=<span class="hljs-string">&#x27;\e[41m&#x27;</span><br>BRB=<span class="hljs-string">&#x27;\e[1;7;31;47m&#x27;</span> <span class="hljs-comment"># Blink Red bold</span><br>NC=<span class="hljs-string">&#x27;\e[0m&#x27;</span> <span class="hljs-comment"># No color</span><br>BG=<span class="hljs-string">&#x27;\e[7m&#x27;</span> <span class="hljs-comment"># Highlighting Background color</span><br>TC=<span class="hljs-string">&#x27;\e[1m&#x27;</span> <span class="hljs-comment"># Highlighting Text color</span><br><br><span class="hljs-comment">########### 文字显示颜色输出函数 ######</span><br><span class="hljs-keyword">function</span> <span class="hljs-function"><span class="hljs-title">echo_white</span></span>()  &#123; <span class="hljs-built_in">printf</span> <span class="hljs-string">&quot;\033[0;37m<span class="hljs-variable">$@</span>\033[0m&quot;</span>     ; &#125;<br><span class="hljs-keyword">function</span> <span class="hljs-function"><span class="hljs-title">echo_whiter</span></span>() &#123; <span class="hljs-built_in">printf</span> <span class="hljs-string">&quot;\033[0;37;7m<span class="hljs-variable">$@</span>\033[0m&quot;</span>   ; &#125;<br><span class="hljs-keyword">function</span> <span class="hljs-function"><span class="hljs-title">echo_red</span></span>()    &#123; <span class="hljs-built_in">printf</span> <span class="hljs-string">&quot;\033[0;31m<span class="hljs-variable">$@</span>\033[0m&quot;</span>     ; &#125;<br><span class="hljs-keyword">function</span> <span class="hljs-function"><span class="hljs-title">echo_redr</span></span>()   &#123; <span class="hljs-built_in">printf</span> <span class="hljs-string">&quot;\033[0;31;7m<span class="hljs-variable">$@</span>\033[0m&quot;</span>   ; &#125;<br><span class="hljs-keyword">function</span> <span class="hljs-function"><span class="hljs-title">echo_green</span></span>()  &#123; <span class="hljs-built_in">printf</span> <span class="hljs-string">&quot;\033[0;32m<span class="hljs-variable">$@</span>\033[0m&quot;</span>     ; &#125;<br><span class="hljs-keyword">function</span> <span class="hljs-function"><span class="hljs-title">echo_greenr</span></span>() &#123; <span class="hljs-built_in">printf</span> <span class="hljs-string">&quot;\033[0;32;7m<span class="hljs-variable">$@</span>\033[0m&quot;</span>   ; &#125;<br><span class="hljs-keyword">function</span> <span class="hljs-function"><span class="hljs-title">white_line</span></span>()  &#123; <span class="hljs-built_in">printf</span> <span class="hljs-string">&quot;\033[0;37m<span class="hljs-variable">$@</span>\033[0m\n&quot;</span>   ; &#125;<br><span class="hljs-keyword">function</span> <span class="hljs-function"><span class="hljs-title">whiter_line</span></span>() &#123; <span class="hljs-built_in">printf</span> <span class="hljs-string">&quot;\033[0;37;7m<span class="hljs-variable">$@</span>\033[0m\n&quot;</span> ; &#125;<br><span class="hljs-keyword">function</span> <span class="hljs-function"><span class="hljs-title">red_line</span></span>()    &#123; <span class="hljs-built_in">printf</span> <span class="hljs-string">&quot;\033[0;31;1m<span class="hljs-variable">$@</span>\033[0m\n&quot;</span> ; &#125;<br><span class="hljs-keyword">function</span> <span class="hljs-function"><span class="hljs-title">redr_line</span></span>()   &#123; <span class="hljs-built_in">printf</span> <span class="hljs-string">&quot;\033[0;31;7m<span class="hljs-variable">$@</span>\033[0m\n&quot;</span> ; &#125;<br><span class="hljs-keyword">function</span> <span class="hljs-function"><span class="hljs-title">green_line</span></span>()  &#123; <span class="hljs-built_in">printf</span> <span class="hljs-string">&quot;\033[0;32;1m<span class="hljs-variable">$@</span>\033[0m\n&quot;</span> ; &#125;<br><span class="hljs-keyword">function</span> <span class="hljs-function"><span class="hljs-title">greenr_line</span></span>() &#123; <span class="hljs-built_in">printf</span> <span class="hljs-string">&quot;\033[0;32;7m<span class="hljs-variable">$@</span>\033[0m\n&quot;</span> ; &#125;<br><br>line_feed=<span class="hljs-string">&quot;+--------------------------------------------------------------------------------+&quot;</span><br><br><span class="hljs-comment"># 临时存储代码、下载文件目录</span><br>tmp_dir=/tmp<br>item_index=0   <span class="hljs-comment"># 记录菜单选项序号</span><br>item_line_count=2   <span class="hljs-comment"># 每行显示菜单数量</span><br>ILEN=40   <span class="hljs-comment"># 单个选项长度</span><br>MLEN=$((<span class="hljs-variable">$&#123;ILEN&#125;</span> * <span class="hljs-variable">$&#123;item_line_count&#125;</span>))   <span class="hljs-comment"># 单行最大长度</span><br><br><br><span class="hljs-comment">#### 检测当前终端支持色彩</span><br><span class="hljs-keyword">function</span> <span class="hljs-function"><span class="hljs-title">check_term</span></span>() &#123;<br>	<span class="hljs-comment"># 指定 TERM ，避免对齐问题(已知某些rxvt-unicode终端版本存在对齐问题)</span><br>    <span class="hljs-keyword">if</span> [[ <span class="hljs-string">&quot;`tput colors`&quot;</span> -ge <span class="hljs-string">&quot;256&quot;</span> ]] ; <span class="hljs-keyword">then</span><br>        <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;支持 256color TERM终端&quot;</span><br>    <span class="hljs-keyword">else</span><br>        <span class="hljs-built_in">export</span> TERM=xterm<br>        <span class="hljs-built_in">export</span> COLORTERM=truecolor<br>    <span class="hljs-keyword">fi</span><br>    <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;当前终端类型: <span class="hljs-variable">$TERM</span>&quot;</span><br>    <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;当前终端色彩: <span class="hljs-variable">$COLORTERM</span>&quot;</span><br>	<span class="hljs-comment">#echo &quot;提示: 8bit 仅支持8种色彩, truecolor/24bit 支持更多色彩&quot;</span><br>&#125;<br><br><span class="hljs-keyword">function</span> <span class="hljs-function"><span class="hljs-title">menu_line</span></span>() &#123; <span class="hljs-built_in">let</span> rlen=<span class="hljs-string">&quot;<span class="hljs-variable">$item_line_count</span> * <span class="hljs-variable">$ILEN</span> + 1&quot;</span> ; <span class="hljs-built_in">echo</span> -en <span class="hljs-string">&quot;|<span class="hljs-variable">$&#123;BRB&#125;</span> <span class="hljs-variable">$@</span> <span class="hljs-variable">$NC</span>&quot;</span> ; tput hpa <span class="hljs-variable">$rlen</span> ; <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;|&quot;</span> ; &#125;<br><span class="hljs-keyword">function</span> <span class="hljs-function"><span class="hljs-title">menu_head</span></span>() &#123; <span class="hljs-built_in">echo</span> <span class="hljs-variable">$line_feed</span> ;   menu_line <span class="hljs-string">&quot;<span class="hljs-variable">$@</span>&quot;</span> ; <span class="hljs-built_in">echo</span> <span class="hljs-variable">$line_feed</span> ; &#125;<br><span class="hljs-comment"># 一行可以有 item_line_count 个菜单选项</span><br><span class="hljs-keyword">function</span> <span class="hljs-function"><span class="hljs-title">menu_item</span></span>() &#123; <span class="hljs-built_in">let</span> item_index=<span class="hljs-variable">$item_index</span>+1 ; n=<span class="hljs-variable">$1</span> ; <span class="hljs-built_in">shift</span> ; <span class="hljs-built_in">let</span> rlen=<span class="hljs-string">&quot;<span class="hljs-variable">$item_index</span> * <span class="hljs-variable">$ILEN</span> + 1&quot;</span> ; <span class="hljs-built_in">echo</span> -en <span class="hljs-string">&quot;|  <span class="hljs-variable">$BG</span> <span class="hljs-variable">$&#123;n&#125;</span> <span class="hljs-variable">$NC</span> <span class="hljs-variable">$@</span>&quot;</span> ; tput hpa <span class="hljs-variable">$rlen</span> ; [[ <span class="hljs-string">&quot;<span class="hljs-variable">$item_index</span>&quot;</span> == <span class="hljs-string">&quot;<span class="hljs-variable">$item_line_count</span>&quot;</span> ]] &amp;&amp; <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;|&quot;</span> &amp;&amp; item_index=0 ; &#125;<br><span class="hljs-comment"># 输出单行长菜单选项,长度有限制</span><br><span class="hljs-keyword">function</span> <span class="hljs-function"><span class="hljs-title">menu_iteml</span></span>() &#123; <span class="hljs-built_in">let</span> rlen=<span class="hljs-string">&quot;<span class="hljs-variable">$item_line_count</span> * <span class="hljs-variable">$ILEN</span> + 1&quot;</span> ; n=<span class="hljs-variable">$1</span> ; <span class="hljs-built_in">shift</span> ; <span class="hljs-built_in">echo</span> -en <span class="hljs-string">&quot;|  <span class="hljs-variable">$BG</span> <span class="hljs-variable">$&#123;n&#125;</span> <span class="hljs-variable">$NC</span> <span class="hljs-variable">$@</span>&quot;</span> ; tput hpa <span class="hljs-variable">$rlen</span> ; <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;|&quot;</span> ; &#125;<br><span class="hljs-comment"># 用于输入长信息(非菜单选项),不限制结尾长度</span><br><span class="hljs-keyword">function</span> <span class="hljs-function"><span class="hljs-title">menu_info</span></span>() &#123; n=<span class="hljs-variable">$1</span> ; <span class="hljs-built_in">shift</span> ; <span class="hljs-built_in">echo</span> -e <span class="hljs-string">&quot;|  <span class="hljs-variable">$BG</span> <span class="hljs-variable">$&#123;n&#125;</span> <span class="hljs-variable">$NC</span> <span class="hljs-variable">$@</span>&quot;</span> ; &#125;<br><span class="hljs-keyword">function</span> <span class="hljs-function"><span class="hljs-title">menu_tail</span></span>() &#123; [[ <span class="hljs-string">&quot;<span class="hljs-variable">$item_index</span>&quot;</span> != <span class="hljs-string">&quot;0&quot;</span> ]] &amp;&amp; <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;|&quot;</span> ; <span class="hljs-built_in">echo</span> <span class="hljs-variable">$line_feed</span> ; item_index=0 ; &#125;<br><br><span class="hljs-comment"># 日志记录</span><br>log_file=<span class="hljs-string">&quot;/tmp/i3config.log&quot;</span><br><span class="hljs-keyword">function</span> <span class="hljs-function"><span class="hljs-title">output_msg</span></span>() &#123; LEVEL=<span class="hljs-string">&quot;<span class="hljs-variable">$1</span>&quot;</span> ; <span class="hljs-built_in">shift</span> ; <span class="hljs-built_in">echo</span> -e <span class="hljs-string">&quot;<span class="hljs-subst">$(date +&#x27;%Y年%m月%d日%H:%M:%S&#x27;)</span>:<span class="hljs-variable">$&#123;LEVEL&#125;</span>: <span class="hljs-variable">$@</span>&quot;</span> ; &#125;<br><span class="hljs-keyword">function</span> <span class="hljs-function"><span class="hljs-title">output_log</span></span>() &#123; <span class="hljs-keyword">if</span> [ <span class="hljs-string">&quot;<span class="hljs-variable">$OUTPUTLOG</span>&quot;</span> = <span class="hljs-string">&quot;yes&quot;</span> ] ; <span class="hljs-keyword">then</span>  output_msg <span class="hljs-variable">$@</span> | <span class="hljs-built_in">tee</span> -a <span class="hljs-variable">$log_file</span> ; <span class="hljs-keyword">else</span> output_msg <span class="hljs-variable">$@</span> &gt;&gt; <span class="hljs-variable">$log_file</span> ; <span class="hljs-keyword">fi</span> &#125;<br><span class="hljs-keyword">function</span> <span class="hljs-function"><span class="hljs-title">loginfo</span></span>() &#123; output_log <span class="hljs-string">&quot;INFO&quot;</span> <span class="hljs-variable">$@</span>  ; &#125;<br><span class="hljs-keyword">function</span> <span class="hljs-function"><span class="hljs-title">logerr</span></span>()  &#123; output_log <span class="hljs-string">&quot;ERROR&quot;</span> <span class="hljs-variable">$@</span> ; &#125;<br><br><span class="hljs-comment">################################################################</span><br><span class="hljs-comment">#  文本信息设定</span><br><br><span class="hljs-comment"># 欢迎和再见提示信息</span><br>WELCOME=<span class="hljs-string">&quot;^_^你笑起来真好看!像春天的花一样!&quot;</span><br>SEE_YOU=<span class="hljs-string">&quot;^_^出去晒晒太阳吧!多运动才更健康!&quot;</span><br><br>READ_TIMEOUT=30   <span class="hljs-comment"># read timeout seconds</span><br><br><span class="hljs-comment">########### 运行条件检测 ###########</span><br><span class="hljs-keyword">function</span> <span class="hljs-function"><span class="hljs-title">prompt</span></span>() &#123; <span class="hljs-comment"># 提示确认函数，如果使用 -y 参数默认为Y确认</span><br>    msg=<span class="hljs-string">&quot;<span class="hljs-variable">$@</span>&quot;</span><br>    <span class="hljs-keyword">if</span> [ <span class="hljs-string">&quot;<span class="hljs-variable">$default_confirm</span>&quot;</span> != <span class="hljs-string">&quot;yes&quot;</span> ] ; <span class="hljs-keyword">then</span><br>        <span class="hljs-built_in">read</span> -t <span class="hljs-variable">$READ_TIMEOUT</span> -r -n 1 -e  -p <span class="hljs-string">&quot;<span class="hljs-variable">$msg</span> (y/`echo_greenr N`)&quot;</span> str_answer<br>        <span class="hljs-keyword">case</span> <span class="hljs-string">&quot;<span class="hljs-variable">$str_answer</span>&quot;</span> <span class="hljs-keyword">in</span><br>            y*|Y*)  <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;已确认&quot;</span> ; <span class="hljs-built_in">return</span> 0 ;;<br>            *)      <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;已取消&quot;</span> ; <span class="hljs-built_in">return</span> 1 ;;<br>        <span class="hljs-keyword">esac</span><br>    <span class="hljs-keyword">else</span><br>        <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;<span class="hljs-variable">$msg</span> (已默认选择 Yes)&quot;</span><br>    <span class="hljs-keyword">fi</span><br>    <span class="hljs-built_in">return</span> 0<br>&#125;<br><span class="hljs-comment"># 检查是否有root权限并提示，需要root权限的命令要添加sudo</span><br><span class="hljs-keyword">function</span> <span class="hljs-function"><span class="hljs-title">check_root</span></span>() &#123; [[ <span class="hljs-string">&quot;`uid -u`&quot;</span> = <span class="hljs-string">&quot;0&quot;</span> ]]  &amp;&amp; ! prompt <span class="hljs-string">&quot;提示:确认在root用户下或者使用sudo运行?&quot;</span> &amp;&amp; <span class="hljs-built_in">exit</span> 0 ; &#125;<br><br><span class="hljs-keyword">function</span> <span class="hljs-function"><span class="hljs-title">check_basic</span></span>() &#123; <span class="hljs-comment"># 基础依赖命令检测与安装</span><br>    <span class="hljs-built_in">command</span> -v apt-get &gt;/dev/null 2&gt;&amp;1 &amp;&amp; sudo apt-get install   -y curl git<br>    <span class="hljs-built_in">command</span> -v dnf     &gt;/dev/null 2&gt;&amp;1 &amp;&amp; sudo dnf install       -y curl git<br>    <span class="hljs-built_in">command</span> -v zypper  &gt;/dev/null 2&gt;&amp;1 &amp;&amp; sudo zypper install    -y curl git<br>    <span class="hljs-built_in">command</span> -v pacman  &amp;&amp; sudo pacman -S --noconfirm --needed curl git<br><br>    <span class="hljs-comment"># Anaconda3 环境可能导致编译失败.</span><br>    <span class="hljs-comment"># 如果不是使用 conda init 方式设置环境，可能取消激活操作会失败</span><br>    anaconda -V &gt;/dev/null 2&gt;&amp;1 &amp;&amp; <span class="hljs-built_in">echo</span> -e <span class="hljs-string">&quot;python3 version: <span class="hljs-variable">$&#123;BRB&#125;</span>`python3 --version` <span class="hljs-variable">$&#123;NC&#125;</span>,path: <span class="hljs-variable">$&#123;BRB&#125;</span>`command -v python3`<span class="hljs-variable">$&#123;NC&#125;</span>&quot;</span> &amp;&amp; <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;检测到您使用了 anaconda 环境，这可能导致编译安装失败, 本脚本会关闭Anaconda环境&quot;</span> &amp;&amp; conda deactivate<br>    <span class="hljs-built_in">echo</span> -e <span class="hljs-string">&quot;python3 version: <span class="hljs-variable">$&#123;BRB&#125;</span>`python3 --version`<span class="hljs-variable">$&#123;NC&#125;</span> ,path: <span class="hljs-variable">$&#123;BRB&#125;</span>`command -v python3`<span class="hljs-variable">$&#123;NC&#125;</span>&quot;</span><br>&#125;<br><br><span class="hljs-comment"># 创建软链接或重命名目录</span><br><span class="hljs-keyword">function</span> <span class="hljs-function"><span class="hljs-title">create_symlink</span></span>() &#123;<br>    source_file=<span class="hljs-string">&quot;<span class="hljs-variable">$1</span>&quot;</span><br>    target_file=<span class="hljs-string">&quot;<span class="hljs-variable">$2</span>&quot;</span><br><br>    [[ ! -r <span class="hljs-string">&quot;<span class="hljs-variable">$source_file</span>&quot;</span> ]] &amp;&amp; loginfo <span class="hljs-string">&quot;找不到 <span class="hljs-variable">$source_file</span> 目录或文件&quot;</span> &amp;&amp; <span class="hljs-built_in">return</span> 1<br>    [[ -L <span class="hljs-string">&quot;<span class="hljs-variable">$target_file</span>&quot;</span> ]] &amp;&amp; loginfo <span class="hljs-string">&quot;目标路径 <span class="hljs-variable">$&#123;target_file&#125;</span> 是软链接，删除软链接&quot;</span> &amp;&amp; <span class="hljs-built_in">rm</span> <span class="hljs-string">&quot;<span class="hljs-variable">$target_file</span>&quot;</span><br>    [[ -r <span class="hljs-string">&quot;<span class="hljs-variable">$target_file</span>&quot;</span> ]] &amp;&amp; loginfo <span class="hljs-string">&quot;目标路径 <span class="hljs-variable">$&#123;target_file&#125;</span> 是目录或文件，重命名&quot;</span> &amp;&amp; <span class="hljs-built_in">mv</span> <span class="hljs-variable">$&#123;target_file&#125;</span> <span class="hljs-string">&quot;<span class="hljs-variable">$&#123;target_file&#125;</span>_<span class="hljs-subst">$(date +%Y-%m-%d)</span>&quot;</span><br>    <span class="hljs-comment"># 创建软链接</span><br>    <span class="hljs-built_in">ln</span> -sf <span class="hljs-string">&quot;<span class="hljs-variable">$source_file</span>&quot;</span> <span class="hljs-string">&quot;<span class="hljs-variable">$target_file</span>&quot;</span><br>&#125;<br><br><span class="hljs-keyword">function</span> <span class="hljs-function"><span class="hljs-title">install_build_deps</span></span>() &#123;<br>    <span class="hljs-built_in">command</span> -v apt-get &amp;&amp; sudo apt-get install   -y build-essential git meson ninja-build make cmake cmake-data pkg-config python3-sphinx python3-packaging dh-autoreconf &amp;&amp; <span class="hljs-built_in">return</span> 0<br>    <span class="hljs-built_in">command</span> -v dnf     &amp;&amp; sudo dnf install       -y gcc gcc-c++ git meson ninja-build pkg-config make cmake @development-tools python3-sphinx python3-sphinx_rtd_theme python3-packaging dh-autoreconf &amp;&amp; <span class="hljs-built_in">return</span> 0<br>    <span class="hljs-built_in">command</span> -v zypper  &amp;&amp; sudo zypper install    -y gcc gcc-c++ git meson ninja pkg-config make cmake python3 python3-Sphinx python3-packaging python3-sphinx_rtd_theme dh-autoreconf &amp;&amp; <span class="hljs-built_in">return</span> 0<br>    <span class="hljs-built_in">command</span> -v pacman  &amp;&amp; sudo pacman -S --needed --noconfirm --needed gcc git meson ninja pkg-config make cmake python3 python-sphinx python-packaging python-sphinx_rtd_theme autoconf automake bison &amp;&amp; <span class="hljs-built_in">return</span> 0<br>&#125;<br><br><span class="hljs-keyword">function</span> <span class="hljs-function"><span class="hljs-title">install_polybar_deps</span></span>() &#123;<br>    <span class="hljs-built_in">command</span> -v apt-get   &amp;&amp; sudo apt-get install -y libuv1-dev libcairo2-dev libxcb1-dev libxcb-util0-dev libxcb-randr0-dev libxcb-composite0-dev python3-xcbgen xcb-proto libxcb-image0-dev libxcb-ewmh-dev libxcb-icccm4-dev lm-sensors x11-utils xdotool pulseaudio pulseaudio-utils &amp;&amp; <span class="hljs-built_in">return</span> 0<br>    <span class="hljs-built_in">command</span> -v dnf       &amp;&amp; sudo dnf install     -y libuv-devel cairo-devel xcb-util-devel libxcb-devel xcb-proto xcb-util-image-devel xcb-util-wm-devel lm_sensors xprop xdotool xev xwininfo pulseaudio pulseaudio-utils &amp;&amp; <span class="hljs-built_in">return</span> 0<br>    <span class="hljs-built_in">command</span> -v zypper    &amp;&amp; sudo zypper install  -y libuv-devel cairo-devel xcb-util-devel libxcb-devel xcb-proto-devel xcb-util-image-devel xcb-util-wm-devel lm-sensors xprop xdotool xev xwininfo pulseaudio pulseaudio-utils &amp;&amp; <span class="hljs-built_in">return</span> 0<br>    <span class="hljs-built_in">command</span> -v pacman  &amp;&amp; sudo pacman -S --needed --noconfirm --needed libuv cairo xcb-util libxcb xcb-proto-devel xcb-util-image xcb-util-wm lm_sensors xorg-xprop xdotool xorg-xev xorg-xwininfo pulseaudio &amp;&amp; <span class="hljs-built_in">return</span> 0<br>&#125;<br><br><span class="hljs-keyword">function</span> <span class="hljs-function"><span class="hljs-title">install_polybar_deps_opt</span></span>() &#123;<br>    <span class="hljs-built_in">command</span> -v apt-get   &amp;&amp; sudo apt-get install -y libxcb-xkb-dev libxcb-xrm-dev libxcb-cursor-dev libasound2-dev libpulse-dev libjsoncpp-dev libmpdclient-dev libcurl4-openssl-dev libnl-genl-3-dev &amp;&amp; <span class="hljs-built_in">return</span> 0<br>    <span class="hljs-built_in">command</span> -v dnf       &amp;&amp; sudo dnf install     -y xcb-util-xrm-devel xcb-util-cursor-devel alsa-lib-devel pulseaudio-libs-devel jsoncpp-devel libmpdclient-devel libcurl-devel libnl3-devel &amp;&amp; <span class="hljs-built_in">return</span> 0<br>    <span class="hljs-built_in">command</span> -v zypper    &amp;&amp; sudo zypper install  -y libxcb-xkb1 xcb-util-xrm-devel xcb-util-cursor-devel alsa-devel libpulse-devel jsoncpp-devel libmpdclient-devel libcurl-devel libnl3-devel &amp;&amp; <span class="hljs-built_in">return</span> 0<br>    <span class="hljs-built_in">command</span> -v pacman  &amp;&amp; sudo pacman -S --needed --noconfirm --needed libxcb xcb-util-xrm xcb-util-cursor alsa-lib libpulse jsoncpp libmpdclient libcurl-compat libnl &amp;&amp; <span class="hljs-built_in">return</span> 0<br>&#125;<br><br><span class="hljs-keyword">function</span> <span class="hljs-function"><span class="hljs-title">compile_polybar</span></span>() &#123;<br>    ! i3 -v &amp;&amp; <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;没找到 i3 命令，请确保先安装了 i3wm 环境后再安装 polybar&quot;</span> &amp;&amp; <span class="hljs-built_in">return</span> 1<br>    <span class="hljs-built_in">read</span> -t <span class="hljs-variable">$READ_TIMEOUT</span> -p <span class="hljs-string">&quot;`echo_green &#x27;输入安装目录,默认 /usr/local :&#x27;`&quot;</span> str_dst<br>    [[ <span class="hljs-string">&quot;<span class="hljs-variable">$str_dst</span>&quot;</span> == <span class="hljs-string">&quot;&quot;</span> ]] &amp;&amp; str_dst=<span class="hljs-string">&quot;/usr/local&quot;</span><br>    [[ ! -d <span class="hljs-string">&quot;<span class="hljs-variable">$str_dst</span>&quot;</span> ]] &amp;&amp; <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;设置的安装目录前缀不存在! [<span class="hljs-variable">$str_dst</span>]&quot;</span> &amp;&amp; <span class="hljs-built_in">return</span> 2<br>    tmp_path=<span class="hljs-variable">$&#123;tmp_dir&#125;</span>/polybar<br>    [[ -d <span class="hljs-variable">$tmp_path</span> ]] &amp;&amp; prompt <span class="hljs-string">&quot;`echo_red &#x27;检测到您已经克隆了代码，是否重新克隆代码&#x27;`&quot;</span> &amp;&amp; <span class="hljs-built_in">rm</span> -rf <span class="hljs-variable">$tmp_path</span><br><br>    install_build_deps<br>    install_polybar_deps<br>    install_polybar_deps_opt<br>    <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;gcc version : `gcc -dumpversion` , 推荐使用 gcc10 版本编译器(官方要求gcc&gt;=5.1)&quot;</span><br>    [[ -d <span class="hljs-string">&quot;<span class="hljs-variable">$tmp_path</span>&quot;</span> ]] || git <span class="hljs-built_in">clone</span> --recursive https://github.com/polybar/polybar <span class="hljs-variable">$&#123;tmp_path&#125;</span><br>    <span class="hljs-built_in">cd</span> <span class="hljs-variable">$tmp_path</span> &amp;&amp; ./build.sh --all-features --gcc --<span class="hljs-built_in">jobs</span> --auto<br>&#125;<br><br><span class="hljs-keyword">function</span> <span class="hljs-function"><span class="hljs-title">install_i3wm_deps</span></span>() &#123;<br>    <span class="hljs-built_in">command</span> -v apt-get &amp;&amp; sudo apt-get install   -y pkg-config libstartup-notification0-dev libxcb-xkb-dev libxcb-xinerama0-dev libxcb-cursor-dev libxcb-keysyms1-dev \<br>            libxcb-icccm4-dev libxcb-xrm-dev libxkbcommon-x11-dev libyajl-dev libcairo2-dev libpango1.0-dev libxfixes-dev libxcb-randr0-dev \<br>            libxcb-shape0-dev libev-dev<br>    <span class="hljs-built_in">command</span> -v dnf     &amp;&amp; sudo dnf install       -y pkg-config libxcb-devel xcb-util-devel libxkbcommon-devel libxkbcommon-x11-devel xcb-util-cursor-devel \<br>            xcb-util-wm-devel xcb-util-keysyms-devel xcb-util-xrm-devel libev-devel yajl-devel asciidoc \<br>            xmlto pcre2-devel startup-notification-devel pango-devel cairo-devel perl-ExtUtils-MakeMaker<br>    <span class="hljs-built_in">command</span> -v zypper  &amp;&amp; sudo zypper install    -y pkg-config libxcb-devel xcb-util-devel libxkbcommon-devel libxkbcommon-x11-devel xcb-util-cursor-devel \<br>            xcb-util-wm-devel xcb-util-keysyms-devel xcb-util-xrm-devel libev-devel libyajl-devel asciidoc \<br>            xmlto pcre2-devel startup-notification-devel pango-devel cairo-devel libiconv_hook-devel <br>    <span class="hljs-built_in">command</span> -v pacman  &amp;&amp; sudo pacman -S --needed --noconfirm --needed pkg-config libxcb xcb-util libxkbcommon libxkbcommon-x11 xcb-util-cursor \<br>            xcb-util-wm xcb-util-keysyms xcb-util-xrm libev yajl asciidoc \<br>            xmlto pcre2 startup-notification pango cairo libiconv<br>&#125;<br><span class="hljs-keyword">function</span> <span class="hljs-function"><span class="hljs-title">compile_i3wm</span></span>() &#123;<br>    tmp_path=<span class="hljs-string">&quot;<span class="hljs-variable">$tmp_dir</span>/i3wm&quot;</span><br>    i3 -v &gt;/dev/null 2&gt;&amp;1 &amp;&amp; <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;i3 命令已经安装过了&quot;</span> &amp;&amp; ! prompt <span class="hljs-string">&quot;仍然继续编译安装 i3 么? 建议手工卸载后再尝试&quot;</span> &amp;&amp; <span class="hljs-built_in">return</span> 1<br>    <span class="hljs-built_in">read</span> -t <span class="hljs-variable">$READ_TIMEOUT</span> -p <span class="hljs-string">&quot;`echo_green &#x27;输入安装目录,默认 /usr :&#x27;`&quot;</span> str_dst<br>    [[ <span class="hljs-string">&quot;<span class="hljs-variable">$str_dst</span>&quot;</span> == <span class="hljs-string">&quot;&quot;</span> ]] &amp;&amp; str_dst=<span class="hljs-string">&quot;/usr&quot;</span><br>    [[ ! -d <span class="hljs-string">&quot;<span class="hljs-variable">$str_dst</span>&quot;</span> ]] &amp;&amp; <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;设置的安装目录前缀不存在! [<span class="hljs-variable">$str_dst</span>]&quot;</span> &amp;&amp; <span class="hljs-built_in">return</span> 2<br>    <span class="hljs-comment"># read -t $READ_TIMEOUT -p &quot;`echo_green &#x27;选择代码分支 next/stable,默认next:&#x27;`&quot; str_branch</span><br>    [[ <span class="hljs-string">&quot;<span class="hljs-variable">$str_branch</span>&quot;</span> == <span class="hljs-string">&quot;&quot;</span> ]] &amp;&amp; str_branch=<span class="hljs-string">&quot;next&quot;</span><br>    [[ -d <span class="hljs-variable">$tmp_path</span> ]] &amp;&amp; prompt <span class="hljs-string">&quot;`echo_red &#x27;检测到您已经克隆了代码，是否重新克隆代码&#x27;`&quot;</span> &amp;&amp; <span class="hljs-built_in">rm</span> -rf <span class="hljs-variable">$tmp_path</span><br>    [[ -d <span class="hljs-string">&quot;<span class="hljs-variable">$tmp_path</span>&quot;</span> ]] || git <span class="hljs-built_in">clone</span> https://github.com/i3/i3.git <span class="hljs-variable">$tmp_path</span><br>    install_build_deps<br>    install_i3wm_deps<br>    <span class="hljs-built_in">cd</span> <span class="hljs-variable">$tmp_path</span> &amp;&amp; git checkout <span class="hljs-variable">$&#123;str_branch&#125;</span> &amp;&amp; <span class="hljs-built_in">mkdir</span> -p build &amp;&amp; <span class="hljs-built_in">cd</span> build &amp;&amp; meson --prefix=<span class="hljs-variable">$&#123;str_dst&#125;</span> -Ddocs=<span class="hljs-literal">false</span> -Dmans=<span class="hljs-literal">false</span> .. &amp;&amp; ninja &amp;&amp; sudo ninja install<br>    [[ -x <span class="hljs-string">&quot;<span class="hljs-variable">$str_dst</span>/bin/i3&quot;</span> ]] || <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;安装失败!&quot;</span> &amp;&amp; <span class="hljs-built_in">return</span> 3<br>    <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;i3wm 安装成功,当前 i3wm 版本: `i3 -v`&quot;</span><br>&#125;<br><br><span class="hljs-keyword">function</span> <span class="hljs-function"><span class="hljs-title">install_picom_deps</span></span>() &#123;<br>    <span class="hljs-built_in">command</span> -v apt-get  &gt;/dev/null 2&gt;&amp;1 &amp;&amp; sudo apt-get install -y libxext-dev libxcb1-dev libxcb-util-dev libxcb-damage0-dev libxcb-dpms0-dev libxcb-xfixes0-dev libxcb-shape0-dev libxcb-render-util0-dev libxcb-render0-dev libxcb-randr0-dev libxcb-composite0-dev libxcb-image0-dev libxcb-present-dev libxcb-glx0-dev libpixman-1-dev libdbus-1-dev libconfig-dev libgl-dev libegl-dev libpcre2-dev libevdev-dev uthash-dev libev-dev libx11-xcb-dev<br>    <span class="hljs-built_in">command</span> -v dnf      &gt;/dev/null 2&gt;&amp;1 &amp;&amp; sudo dnf     install -y dbus-devel libconfig-devel libdrm-devel libev-devel libX11-devel libX11-xcb libXext-devel libxcb-devel libGL-devel libEGL-devel pcre2-devel pixman-devel uthash-devel xcb-util-image-devel xcb-util-renderutil-devel xorg-x11-proto-devel<br>    <span class="hljs-built_in">command</span> -v zypper   &gt;/dev/null 2&gt;&amp;1 &amp;&amp; sudo zypper  install -y dbus-1-devel libX11-devel libX11-xcb1 libXext-devel xproto-devel \<br>                libxcb-devel libpixman-1-0-devel Mesa-libGL-devel Mesa-libEGL-devel pcre2-devel libev-devel uthash-devel \<br>                libconfig-devel libxcb-composite0 libxcb-damage0 libxcb-dpms0 libxcb-glx0 libxcb-image0 libxcb-present0 \<br>                libxcb-randr0 libxcb-render0 libxcb-shape0 libxcb-xfixes0<br>    <span class="hljs-built_in">command</span> -v pacman  &amp;&amp; sudo pacman -S --needed --noconfirm --needed dbus libx11 libxext \<br>                libxcb pixman mesa pcre2 libev uthash libconfig<br>&#125;<br><span class="hljs-keyword">function</span> <span class="hljs-function"><span class="hljs-title">compile_picom</span></span>() &#123;<br>    url=<span class="hljs-string">&quot;https://github.com/yshui/picom.git&quot;</span><br>    tmp_path=<span class="hljs-variable">$tmp_dir</span>/picom<br>    [[ -d <span class="hljs-string">&quot;<span class="hljs-variable">$tmp_path</span>&quot;</span> ]] &amp;&amp; prompt <span class="hljs-string">&quot;已经克隆过代码，是否重新克隆?&quot;</span> &amp;&amp; <span class="hljs-built_in">rm</span> -rf <span class="hljs-string">&quot;<span class="hljs-variable">$tmp_path</span>&quot;</span><br>    [[ -d <span class="hljs-string">&quot;<span class="hljs-variable">$tmp_path</span>&quot;</span> ]] || git <span class="hljs-built_in">clone</span> <span class="hljs-variable">$url</span> <span class="hljs-variable">$tmp_path</span><br>    [[ ! -d <span class="hljs-string">&quot;<span class="hljs-variable">$tmp_path</span>&quot;</span> ]] &amp;&amp; <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;克隆代码失败!稍后再重试!&quot;</span> &amp;&amp; <span class="hljs-built_in">return</span> 0<br>    <br>    <span class="hljs-built_in">read</span> -t <span class="hljs-variable">$READ_TIMEOUT</span> -p <span class="hljs-string">&quot;`echo_green &#x27;输入安装目录,默认 /usr/local :&#x27;`&quot;</span> str_dst<br>    [[ <span class="hljs-string">&quot;<span class="hljs-variable">$str_dst</span>&quot;</span> == <span class="hljs-string">&quot;&quot;</span> ]] &amp;&amp; str_dst=<span class="hljs-string">&quot;/usr/local&quot;</span><br>    [[ ! -d <span class="hljs-string">&quot;<span class="hljs-variable">$str_dst</span>&quot;</span> ]] &amp;&amp; <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;设置的安装目录前缀不存在! [<span class="hljs-variable">$str_dst</span>]&quot;</span> &amp;&amp; <span class="hljs-built_in">return</span> 2<br>    <span class="hljs-comment"># read -t $READ_TIMEOUT -p &quot;`echo_green &#x27;选择代码分支 next/stable,默认next:&#x27;`&quot; str_branch</span><br>    [[ <span class="hljs-string">&quot;<span class="hljs-variable">$str_branch</span>&quot;</span> == <span class="hljs-string">&quot;&quot;</span> ]] &amp;&amp; str_branch=<span class="hljs-string">&quot;next&quot;</span><br>    <br>    install_build_deps<br>    install_picom_deps<br>    <span class="hljs-built_in">cd</span> <span class="hljs-variable">$tmp_path</span> &amp;&amp; git checkout <span class="hljs-variable">$&#123;str_branch&#125;</span> &amp;&amp; git submodule update --init --recursive<br>    meson setup --prefix=<span class="hljs-variable">$&#123;str_dst&#125;</span> --buildtype=release . build   &amp;&amp; ninja -C build &amp;&amp; sudo ninja -C build install<br>&#125;<br><span class="hljs-keyword">function</span> <span class="hljs-function"><span class="hljs-title">install_dotfiles</span></span>() &#123;<br>    <span class="hljs-comment"># 克隆自己的 dotfiles 配置文档</span><br>    tmp_path=<span class="hljs-variable">$dotfiles_path</span><br>    [[ -d <span class="hljs-string">&quot;<span class="hljs-variable">$tmp_path</span>&quot;</span> ]] &amp;&amp; prompt <span class="hljs-string">&quot;`echo_redr \&quot;<span class="hljs-variable">$tmp_path</span> 代码已经克隆过， 是否重新克隆安装?\&quot;`&quot;</span> &amp;&amp; <span class="hljs-built_in">mv</span> <span class="hljs-variable">$&#123;tmp_path&#125;</span> <span class="hljs-variable">$&#123;tmp_path&#125;</span>.`<span class="hljs-built_in">date</span> +%Y%m%d%H%M`<br>    [[ -d <span class="hljs-string">&quot;<span class="hljs-variable">$tmp_path</span>&quot;</span> ]] || git <span class="hljs-built_in">clone</span> --depth=1 --shallow-submodules --recurse-submodules https://github.com/switchToLinux/dotfiles.git <span class="hljs-variable">$tmp_path</span><br>    <span class="hljs-built_in">cd</span> <span class="hljs-variable">$tmp_path</span> || <span class="hljs-built_in">return</span> 1<br><br>    create_symlink <span class="hljs-variable">$tmp_path</span>/i3_polybar ~/.config/i3<br>    meta_key=<span class="hljs-string">&quot;Mod1&quot;</span><br>    prompt <span class="hljs-string">&quot;是否使用Alt键作为\$mod键(y--选择Alt键,N-选择Supper/Win键)&quot;</span> || meta_key=<span class="hljs-string">&quot;Mod4&quot;</span><br>    sed -i <span class="hljs-string">&quot;s/^set \$mod .*/set \$mod <span class="hljs-variable">$&#123;meta_key&#125;</span>/g&quot;</span> ~/.config/i3/config<br>    menu_head <span class="hljs-string">&quot;已经选择 <span class="hljs-variable">$meta_key</span> 作为 \$mod 键(Mod1:Alt,Mod4:Super)&quot;</span><br><br>    create_symlink <span class="hljs-variable">$tmp_path</span>/polybar_themes ~/.config/polybar_themes<br>    create_symlink <span class="hljs-variable">$tmp_path</span>/picom ~/.config/picom<br>    <span class="hljs-built_in">mkdir</span> -p ~/.local/share/mpd<br>    create_symlink <span class="hljs-variable">$tmp_path</span>/mpd ~/.config/mpd<br>    create_symlink <span class="hljs-variable">$tmp_path</span>/dunst ~/.config/dunst<br>    create_symlink <span class="hljs-variable">$tmp_path</span>/ranger ~/.config/ranger<br>    <span class="hljs-comment"># replace by rofi_themes</span><br>    <span class="hljs-comment"># create_symlink $tmp_path/rofi ~/.config/rofi</span><br>    create_symlink <span class="hljs-variable">$tmp_path</span>/ncmpcpp ~/.config/ncmpcpp<br><br>    <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;配置 ~/.Xresources 文件&quot;</span><br>    create_symlink <span class="hljs-variable">$tmp_path</span>/Xresources ~/.Xresources<br>    create_symlink <span class="hljs-variable">$tmp_path</span>/Xresources.d ~/.config/Xresources.d<br><br>    i3_desktop_data=<span class="hljs-string">&quot;W0Rlc2t0b3AgRW50cnldCk5hbWU9aTMKQ29tbWVudD1pbXByb3ZlZCBkeW5hbWljIHRpbGluZyB3aW5kb3cgbWFuYWdlcgpFeGVjPWkzClRyeUV4ZWM9aTMKVHlwZT1BcHBsaWNhdGlvbgpYLUxpZ2h0RE0tRGVza3RvcE5hbWU9aTMKRGVza3RvcE5hbWVzPWkzCktleXdvcmRzPXRpbGluZzt3bTt3aW5kb3dtYW5hZ2VyO3dpbmRvdzttYW5hZ2VyOwoK&quot;</span><br>    sudo sh -c <span class="hljs-string">&quot;echo <span class="hljs-variable">$i3_desktop_data</span>| base64 -d &gt; /usr/share/xsessions/i3.desktop&quot;</span><br><br>    desktop_data=<span class="hljs-string">&quot;W0Rlc2t0b3AgRW50cnldCkVuY29kaW5nPVVURi04ClR5cGU9QXBwbGljYXRpb24KTmFtZT1pMwpOb0Rpc3BsYXk9dHJ1ZQpHZW5lcmljTmFtZT1BIGR5bmFtaWMgdGlsaW5nIHdpbmRvdyBtYW5hZ2VyCkNvbW1lbnQ9aW1wcm92ZWQgZHluYW1pYyB0aWxpbmcgd2luZG93IG1hbmFnZXIKSWNvbj1pMwpFeGVjPWkzClgtR05PTUUtV01OYW1lPWkzClgtR05PTUUtQXV0b3N0YXJ0LVBoYXNlPVdpbmRvd01hbmFnZXIKWC1HTk9NRS1Qcm92aWRlcz13aW5kb3dtYW5hZ2VyClgtR05PTUUtQXV0b3N0YXJ0LU5vdGlmeT1mYWxzZQoK&quot;</span><br>    sudo sh -c <span class="hljs-string">&quot;echo <span class="hljs-variable">$desktop_data</span> | base64 -d &gt; /usr/share/applications/i3.desktop&quot;</span><br><br>    <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;配置 neovim 环境&quot;</span><br>    create_symlink <span class="hljs-variable">$tmp_path</span>/nvim ~/.config/nvim<br><br>    <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;配置 xfce4-terminal 环境&quot;</span><br>    <span class="hljs-built_in">mkdir</span> -p ~/.config/xfce4<br>    create_symlink <span class="hljs-variable">$tmp_path</span>/xfce4_terminal ~/.config/xfce4/terminal<br>    <br>    <span class="hljs-comment"># picom 使用gpu 时 ，设置 glx , 使用cpu时设置 xrender</span><br>    <span class="hljs-comment"># 如果 nvidia-smi 命令 或 amdgpu-pro 命令存在 则使用 glx ， 否则使用 xrender</span><br>    <span class="hljs-keyword">if</span> <span class="hljs-built_in">command</span> -v nvidia-smi &gt;/dev/null 2&gt;&amp;1 || <span class="hljs-built_in">command</span> -v amdgpu-pro &gt;/dev/null 2&gt;&amp;1; <span class="hljs-keyword">then</span><br>        backend=<span class="hljs-string">&quot;glx&quot;</span><br>    <span class="hljs-keyword">else</span><br>        backend=<span class="hljs-string">&quot;xrender&quot;</span><br>    <span class="hljs-keyword">fi</span><br><br>    <span class="hljs-comment"># 替换配置文件中的 backend 配置</span><br>    menu_head <span class="hljs-string">&quot;设置 picom 使用的后端为 <span class="hljs-variable">$backend</span> , 如果有独显则可以使用 glx&quot;</span><br>    sed -i <span class="hljs-string">&quot;s/^backend = .*/backend = \&quot;<span class="hljs-variable">$backend</span>\&quot;/&quot;</span> ~/.config/picom/picom.conf<br>    <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;完成 dotfiles 配置任务!&quot;</span><br>&#125;<br><br><span class="hljs-keyword">function</span> <span class="hljs-function"><span class="hljs-title">install_i3lock_deps</span></span>() &#123;<br>    <span class="hljs-built_in">command</span> -v apt-get &gt;/dev/null 2&gt;&amp;1 &amp;&amp; sudo apt-get   install -y libjpeg-dev libpam0g-dev<br>    <span class="hljs-built_in">command</span> -v dnf      &gt;/dev/null 2&gt;&amp;1 &amp;&amp; sudo dnf      install -y libjpeg-turbo-devel pam pam-devel<br>    <span class="hljs-built_in">command</span> -v zypper &gt;/dev/null 2&gt;&amp;1 &amp;&amp; sudo zypper     install -y libjpeg8-devel pam pam-devel<br>    <span class="hljs-built_in">command</span> -v pacman  &amp;&amp; sudo pacman -S --needed --noconfirm --needed libjpeg-turbo pam<br>&#125;<br><span class="hljs-keyword">function</span> <span class="hljs-function"><span class="hljs-title">compile_i3lock_color</span></span>() &#123;<br>    prompt <span class="hljs-string">&quot;编译安装 i3lock-color&quot;</span> || <span class="hljs-built_in">return</span> 1<br>    url=<span class="hljs-string">&quot;https://github.com/Raymo111/i3lock-color.git&quot;</span><br>    tmp_path=<span class="hljs-variable">$tmp_dir</span>/i3lock-color<br>    [[ -d <span class="hljs-string">&quot;<span class="hljs-variable">$tmp_path</span>&quot;</span> ]] &amp;&amp; prompt <span class="hljs-string">&quot;已经克隆过代码，是否重新克隆?&quot;</span> &amp;&amp; <span class="hljs-built_in">rm</span> -rf <span class="hljs-string">&quot;<span class="hljs-variable">$tmp_path</span>&quot;</span><br>    [[ -d <span class="hljs-string">&quot;<span class="hljs-variable">$tmp_path</span>&quot;</span> ]] || git <span class="hljs-built_in">clone</span> <span class="hljs-variable">$url</span> <span class="hljs-variable">$tmp_path</span><br>    [[ ! -d <span class="hljs-string">&quot;<span class="hljs-variable">$tmp_path</span>&quot;</span> ]] &amp;&amp; <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;克隆代码失败!稍后再重试!&quot;</span> &amp;&amp; <span class="hljs-built_in">return</span> 0<br><br>    install_i3lock_deps<br>    install_build_deps<br>    <span class="hljs-built_in">cd</span> <span class="hljs-variable">$tmp_path</span> &amp;&amp; ./install-i3lock-color.sh<br>&#125;<br><span class="hljs-keyword">function</span> <span class="hljs-function"><span class="hljs-title">install_rofi_deps</span></span>()&#123;<br>    <span class="hljs-built_in">command</span> -v apt-get &gt;/dev/null 2&gt;&amp;1 &amp;&amp; sudo apt-get   install -y libgdk-pixbuf-2.0-dev bison flex flex-doc<br>    <span class="hljs-built_in">command</span> -v dnf      &gt;/dev/null 2&gt;&amp;1 &amp;&amp; sudo dnf      install -y ghc-gi-gdkpixbuf-devel<br>    <span class="hljs-built_in">command</span> -v zypper &gt;/dev/null 2&gt;&amp;1 &amp;&amp; sudo zypper     install -y gdk-pixbuf-devel flex<br>    <span class="hljs-built_in">command</span> -v pacman  &amp;&amp; sudo pacman -S --needed --noconfirm --needed gdk-pixbuf2 flex<br>&#125;<br><span class="hljs-keyword">function</span> <span class="hljs-function"><span class="hljs-title">compile_rofi</span></span>() &#123;<br>    prompt <span class="hljs-string">&quot;编译安装 rofi&quot;</span> || <span class="hljs-built_in">return</span> 1<br>    url=<span class="hljs-string">&quot;https://github.com/davatorium/rofi.git&quot;</span><br>    tmp_path=<span class="hljs-variable">$tmp_dir</span>/rofi<br>    [[ -d <span class="hljs-string">&quot;<span class="hljs-variable">$tmp_path</span>&quot;</span> ]] &amp;&amp; prompt <span class="hljs-string">&quot;已经克隆过代码，是否重新克隆?&quot;</span> &amp;&amp; <span class="hljs-built_in">rm</span> -rf <span class="hljs-string">&quot;<span class="hljs-variable">$tmp_path</span>&quot;</span><br>    [[ -d <span class="hljs-string">&quot;<span class="hljs-variable">$tmp_path</span>&quot;</span> ]] || git <span class="hljs-built_in">clone</span> --recursive <span class="hljs-variable">$url</span> <span class="hljs-variable">$tmp_path</span><br>    [[ ! -d <span class="hljs-string">&quot;<span class="hljs-variable">$tmp_path</span>&quot;</span> ]] &amp;&amp; <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;克隆代码失败!稍后再重试!&quot;</span> &amp;&amp; <span class="hljs-built_in">return</span> 0<br><br>    <span class="hljs-built_in">read</span> -t <span class="hljs-variable">$READ_TIMEOUT</span> -p <span class="hljs-string">&quot;`echo_green &#x27;输入安装目录,默认 /usr/local :&#x27;`&quot;</span> str_dst<br>    [[ <span class="hljs-string">&quot;<span class="hljs-variable">$str_dst</span>&quot;</span> == <span class="hljs-string">&quot;&quot;</span> ]] &amp;&amp; str_dst=<span class="hljs-string">&quot;/usr/local&quot;</span><br>    [[ ! -d <span class="hljs-string">&quot;<span class="hljs-variable">$str_dst</span>&quot;</span> ]] &amp;&amp; <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;设置的安装目录前缀不存在! [<span class="hljs-variable">$str_dst</span>]&quot;</span> &amp;&amp; <span class="hljs-built_in">return</span> 2<br>    <span class="hljs-comment"># read -t $READ_TIMEOUT -p &quot;`echo_green &#x27;选择代码分支 next/stable,默认next:&#x27;`&quot; str_branch</span><br>    [[ <span class="hljs-string">&quot;<span class="hljs-variable">$str_branch</span>&quot;</span> == <span class="hljs-string">&quot;&quot;</span> ]] &amp;&amp; str_branch=<span class="hljs-string">&quot;next&quot;</span><br><br>    install_rofi_deps<br>    install_build_deps<br>    <span class="hljs-built_in">cd</span> <span class="hljs-variable">$tmp_path</span> &amp;&amp; git checkout <span class="hljs-variable">$str_branch</span> &amp;&amp; meson setup build --prefix=<span class="hljs-variable">$&#123;str_dst&#125;</span> &amp;&amp;  ninja -C build &amp;&amp; sudo ninja -C build install<br>&#125;<br><br><span class="hljs-keyword">function</span> <span class="hljs-function"><span class="hljs-title">install_mpd_deps</span></span>() &#123;<br>    <span class="hljs-built_in">command</span> -v apt-get &amp;&amp; sudo apt-get install -y meson g++ \<br>        libfmt-dev libpcre2-dev libmad0-dev libmpg123-dev libid3tag0-dev \<br>        libflac-dev libvorbis-dev libopus-dev libogg-dev \<br>        libadplug-dev libaudiofile-dev libsndfile1-dev libfaad-dev \<br>        libfluidsynth-dev libgme-dev libmikmod-dev libmodplug-dev \<br>        libmpcdec-dev libwavpack-dev libwildmidi-dev \<br>        libsidplay2-dev libsidutils-dev libresid-builder-dev libavcodec-dev libavformat-dev \<br>        libmp3lame-dev libtwolame-dev libshine-dev libsamplerate0-dev libsoxr-dev \<br>        libbz2-dev libcdio-paranoia-dev libiso9660-dev libmms-dev \<br>        libzzip-dev libcurl4-gnutls-dev libyajl-dev libexpat-dev \<br>        libasound2-dev libao-dev libjack-jackd2-dev libopenal-dev \<br>        libpulse-dev libshout3-dev libsndio-dev libmpdclient-dev \<br>        libnfs-dev libupnp-dev libavahi-client-dev libsqlite3-dev libsystemd-dev \<br>        libgtest-dev libboost-dev libicu-dev libchromaprint-dev libgcrypt20-dev<br>    <span class="hljs-built_in">command</span> -v dnf    &amp;&amp; sudo dnf      install -y fmt-devel pcre2-devel libmad-devel mpg123-devel libid3tag-devel \<br>        flac-devel libvorbis-devel libopusenc-devel libogg-devel adplug-devel audiofile-devel libsndfile-devel faad2-devel \<br>        fluidsynth-devel libmikmod-devel libmodplug-devel libmpcdec-devel wavpack-devel wildmidi-devel \<br>        libsidplayfp-devel ffmpeg ffmpeg-libs lame-devel twolame-devel libsamplerate-devel soxr-devel \<br>        bzip2-devel libcdio-paranoia-devel libisofs-devel libmms-devel zziplib-devel libcurl-devel \<br>        yajl-devel expat-devel SAASound-devel libao-devel openal-soft-devel \<br>        pulseaudio-libs-devel libshout-devel libmpdclient-devel libnfs-devel libupnp-devel avahi-devel \<br>        libsqlite3x-devel systemd-devel gtest-devel boost-devel libicu-devel libchromaprint-devel libgcrypt-devel<br>        <span class="hljs-comment"># no install: libgme libsidutils libresid-builder-dev libshine libjack-jackd2-dev libsndio-dev</span><br>    <span class="hljs-built_in">command</span> -v zypper &amp;&amp; sudo zypper     install -y fmt-devel pcre2-devel libmad-devel mpg123-devel libid3tag-devel \<br>        flac-devel libvorbis-devel libopus-devel libogg-devel audiofile-devel libsndfile-devel libfaad-devel \<br>        fluidsynth-devel libgme-devel  libmikmod-devel libmodplug-devel libmpcdec-devel wavpack-devel wildmidi-devel \<br>        libsidplayfp-devel ffmpeg libavcodec-devel libavformat-devel libmp3lame-devel libtwolame-devel libshine-devel libsamplerate-devel soxr-devel \<br>        libbz2-devel libcdio-paranoia-devel libisofs-devel libmms-devel zziplib-devel libcurl-devel \<br>        libyajl-devel libexpat-devel libasound2 libsoundio-devel libao-devel libjack-devel openal-soft-devel \<br>        libpulse-devel libshout-devel sndio-devel libmpdclient-devel libnfs-devel libupnp-devel libavahi-client3 \<br>        sqlite3-devel systemd-devel gtest libboost_headers-devel libicu-devel libchromaprint-devel libgcrypt-devel<br>        <span class="hljs-comment"># no install: adplug libsidutils libresid-builder-dev </span><br>    <span class="hljs-built_in">command</span> -v pacman &amp;&amp; sudo pacman -S --needed --noconfirm --needed <span class="hljs-built_in">fmt</span> pcre2 libmad mpg123 libid3tag flac libvorbis opus libogg \<br>        audiofile libsndfile faad2 fluidsynth libgme libmikmod libmodplug \<br>        libmpcdec wavpack wildmidi libsidplayfp ffmpeg lame twolame libsamplerate libsoxr bzip2 \<br>        libcdio-paranoia libisofs libmms zziplib libcurl-compat yajl expat alsa-lib libao jack2 \<br>        openal libpulse libshout sndio libmpdclient libnfs libupnp avahi sqlite systemd-libs \<br>        gtest boost-libs icu chromaprint chromaprint<br><br>        <span class="hljs-comment"># adplug shine \</span><br>        <span class="hljs-comment"># https://github.com/adplug/adplug</span><br>        <span class="hljs-comment"># https://github.com/mcfiredrill/libgme</span><br>&#125;<br><span class="hljs-keyword">function</span> <span class="hljs-function"><span class="hljs-title">compile_mpd</span></span>() &#123;<br>    prompt <span class="hljs-string">&quot;编译安装 mpd(libavcodec等库需要第三方源)&quot;</span> || <span class="hljs-built_in">return</span> 1<br>    url=<span class="hljs-string">&quot;https://github.com/MusicPlayerDaemon/MPD.git&quot;</span><br>    tmp_path=<span class="hljs-variable">$tmp_dir</span>/mpd<br>    [[ -d <span class="hljs-string">&quot;<span class="hljs-variable">$tmp_path</span>&quot;</span> ]] &amp;&amp; prompt <span class="hljs-string">&quot;已经克隆过代码，是否重新克隆?&quot;</span> &amp;&amp; <span class="hljs-built_in">rm</span> -rf <span class="hljs-string">&quot;<span class="hljs-variable">$tmp_path</span>&quot;</span><br>    [[ -d <span class="hljs-string">&quot;<span class="hljs-variable">$tmp_path</span>&quot;</span> ]] || git <span class="hljs-built_in">clone</span> --recursive <span class="hljs-variable">$url</span> <span class="hljs-variable">$tmp_path</span><br>    [[ ! -d <span class="hljs-string">&quot;<span class="hljs-variable">$tmp_path</span>&quot;</span> ]] &amp;&amp; <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;克隆代码失败!稍后再重试!&quot;</span> &amp;&amp; <span class="hljs-built_in">return</span> 0<br><br>    <span class="hljs-built_in">read</span> -t <span class="hljs-variable">$READ_TIMEOUT</span> -p <span class="hljs-string">&quot;`echo_green &#x27;输入安装目录,默认 /usr/local :&#x27;`&quot;</span> str_dst<br>    [[ <span class="hljs-string">&quot;<span class="hljs-variable">$str_dst</span>&quot;</span> == <span class="hljs-string">&quot;&quot;</span> ]] &amp;&amp; str_dst=<span class="hljs-string">&quot;/usr/local&quot;</span><br>    [[ ! -d <span class="hljs-string">&quot;<span class="hljs-variable">$str_dst</span>&quot;</span> ]] &amp;&amp; <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;设置的安装目录前缀不存在! [<span class="hljs-variable">$str_dst</span>]&quot;</span> &amp;&amp; <span class="hljs-built_in">return</span> 2<br>    <span class="hljs-comment"># read -t $READ_TIMEOUT -p &quot;`echo_green &#x27;选择代码分支 master/stable,默认master:&#x27;`&quot; str_branch</span><br>    [[ <span class="hljs-string">&quot;<span class="hljs-variable">$str_branch</span>&quot;</span> == <span class="hljs-string">&quot;&quot;</span> ]] &amp;&amp; str_branch=<span class="hljs-string">&quot;master&quot;</span><br><br>    install_build_deps<br>    install_mpd_deps<br>    <span class="hljs-built_in">cd</span> <span class="hljs-variable">$tmp_path</span> &amp;&amp; git checkout <span class="hljs-variable">$str_branch</span> &amp;&amp; meson setup build --prefix=<span class="hljs-variable">$&#123;str_dst&#125;</span> &amp;&amp;  ninja -C build &amp;&amp; sudo ninja -C build install<br>&#125;<br><br><span class="hljs-keyword">function</span> <span class="hljs-function"><span class="hljs-title">install_others</span></span>() &#123;<br>    <span class="hljs-comment"># 使用命令安装 psmisc(killall)</span><br>    <span class="hljs-built_in">command</span> -v apt-get &amp;&amp; sudo apt-get install -y feh variety dunst rxvt-unicode x11-xserver-utils mpc ncmpcpp firefox-esr psmisc pulseaudio thunar pamixer neovim<br>    <span class="hljs-comment"># fedora 没有提供mpd安装包(涉及到h264编解码器专利原因),需要替换ffmpeg相关库</span><br>    <span class="hljs-built_in">command</span> -v dnf     &amp;&amp; sudo yum install --nogpgcheck https://mirrors.tuna.tsinghua.edu.cn/rpmfusion/free/fedora/rpmfusion-free-release-$(rpm -E %fedora).noarch.rpm https://mirrors.tuna.tsinghua.edu.cn/rpmfusion/nonfree/fedora/rpmfusion-nonfree-release-$(rpm -E %fedora).noarch.rpm<br>    <span class="hljs-built_in">command</span> -v dnf     &amp;&amp; sudo sed -i <span class="hljs-string">&#x27;s|^metalink=|#metalink=|g;s|^#baseurl=http://download1.rpmfusion.org/|baseurl=https://mirrors.tuna.tsinghua.edu.cn/rpmfusion/|g&#x27;</span> /etc/yum.repos.d/rpmfusion*.repo &amp;&amp; sudo dnf install --allowerasing -y mpd<br>    <span class="hljs-built_in">command</span> -v dnf     &amp;&amp; sudo dnf     install -y feh variety dunst rxvt-unicode xrandr mpc ncmpcpp firefox psmisc thunar pamixer neovim<br>    <span class="hljs-built_in">command</span> -v zypper  &amp;&amp; sudo zypper  install -y feh variety dunst rxvt-unicode xrandr mpd mpclient ncmpcpp MozillaFirefox psmisc thunar pamixer neovim<br>    <span class="hljs-built_in">command</span> -v pacman  &amp;&amp; sudo pacman -S --needed --noconfirm --needed feh variety dunst rxvt-unicode xorg-xrandr mpc ncmpcpp firefox psmisc thunar noto-fonts jack2 pamixer neovim<br>&#125;<br><br><span class="hljs-keyword">function</span> <span class="hljs-function"><span class="hljs-title">install_urxvt_ext</span></span>() &#123;<br>    ext_path=<span class="hljs-string">&quot;<span class="hljs-variable">$HOME</span>/.urxvt/ext&quot;</span><br>    [[ -r <span class="hljs-string">&quot;<span class="hljs-variable">$ext_path</span>&quot;</span> ]] || <span class="hljs-built_in">mkdir</span> -p <span class="hljs-variable">$ext_path</span><br>    url=<span class="hljs-string">&quot;https://raw.githubusercontent.com/majutsushi/urxvt-font-size/master/font-size&quot;</span><br>    curl -o <span class="hljs-variable">$ext_path</span>/font-size <span class="hljs-variable">$url</span><br><br>&#125;<br><span class="hljs-comment"># 主题选择工具,选择结果保存在 select_theme 变量中</span><br><span class="hljs-comment"># 用法 common_select &lt;theme_dir&gt; &lt;prefix_str&gt;</span><br><span class="hljs-comment"># theme_dir ： 用于列举子目录下的选项</span><br><span class="hljs-comment"># prefix_str : 用于过滤条件，比如只希望包含.ini的文件列表就可以设置为 &quot;.ini&quot;</span><br><span class="hljs-comment"># 输入表达式说明： 支持正则匹配，例如 ^abc$ 就只会匹配 abc 字符串，因为输入内容会作为grep的匹配表达式.</span><br><span class="hljs-keyword">function</span> <span class="hljs-function"><span class="hljs-title">common_select</span></span>() &#123;<br>    <span class="hljs-built_in">local</span> theme_dir=<span class="hljs-string">&quot;<span class="hljs-variable">$1</span>&quot;</span><br>    <span class="hljs-built_in">local</span> prefix=<span class="hljs-string">&quot;<span class="hljs-variable">$2</span>&quot;</span><br>    <span class="hljs-built_in">local</span> current_input=<span class="hljs-string">&quot;&quot;</span><br>    <span class="hljs-built_in">local</span> exit_loop=<span class="hljs-literal">false</span><br>    <span class="hljs-built_in">echo</span> -n <span class="hljs-string">&quot;输入<span class="hljs-variable">$&#123;prefix&#125;</span>名称:&quot;</span><br>    <span class="hljs-keyword">while</span> ! <span class="hljs-variable">$exit_loop</span>; <span class="hljs-keyword">do</span><br>        <span class="hljs-built_in">read</span> -t <span class="hljs-variable">$READ_TIMEOUT</span> -r -s -n 1 char<br><br>        <span class="hljs-keyword">if</span> [[ <span class="hljs-variable">$char</span> == $<span class="hljs-string">&#x27;\177&#x27;</span> ]]; <span class="hljs-keyword">then</span> <span class="hljs-comment"># 退格键</span><br>            current_input=<span class="hljs-string">&quot;<span class="hljs-variable">$&#123;current_input%?&#125;</span>&quot;</span><br>        <span class="hljs-keyword">elif</span> [[ <span class="hljs-string">&quot;<span class="hljs-variable">$char</span>&quot;</span> == <span class="hljs-string">&#x27;&#x27;</span> ]]; <span class="hljs-keyword">then</span> <span class="hljs-comment"># 输入为空时表示结束输入</span><br>            exit_loop=<span class="hljs-literal">true</span><br>        <span class="hljs-keyword">else</span> <span class="hljs-comment"># 将输入的字符追加到当前目录</span><br>            current_input=<span class="hljs-string">&quot;<span class="hljs-variable">$&#123;current_input&#125;</span><span class="hljs-variable">$&#123;char&#125;</span>&quot;</span><br>        <span class="hljs-keyword">fi</span><br><br>        <span class="hljs-comment"># 清除当前行并显示新内容</span><br>        tput ed  &amp;&amp; <span class="hljs-built_in">echo</span> -ne <span class="hljs-string">&quot;\r输入<span class="hljs-variable">$&#123;prefix&#125;</span>名称: <span class="hljs-variable">$&#123;current_input&#125;</span>&quot;</span><br><br>        <span class="hljs-keyword">if</span> [[ <span class="hljs-string">&quot;<span class="hljs-variable">$&#123;current_input&#125;</span>&quot;</span> == <span class="hljs-string">&quot;random&quot;</span> ]] ; <span class="hljs-keyword">then</span>  <span class="hljs-comment"># 随机选择一个主题</span><br>            maxn=`<span class="hljs-built_in">ls</span> <span class="hljs-string">&quot;<span class="hljs-variable">$theme_dir</span>&quot;</span> | grep <span class="hljs-string">&quot;<span class="hljs-variable">$prefix</span>&quot;</span>|<span class="hljs-built_in">wc</span> -l`<br>            str_rand=<span class="hljs-string">&quot;<span class="hljs-subst">$(($RANDOM%$&#123;maxn&#125;)</span>)&quot;</span><br>            selected_theme=`<span class="hljs-built_in">ls</span> <span class="hljs-string">&quot;<span class="hljs-variable">$theme_dir</span>&quot;</span> | grep <span class="hljs-string">&quot;<span class="hljs-variable">$prefix</span>&quot;</span> |sed -n <span class="hljs-string">&quot;<span class="hljs-variable">$&#123;str_rand&#125;</span>p&quot;</span>`<br>            <span class="hljs-built_in">break</span><br>        <span class="hljs-keyword">fi</span><br>        <span class="hljs-comment"># 保存当前光标位置</span><br>        tput sc<br>        <span class="hljs-comment"># 将光标移动到最后一行</span><br>        <span class="hljs-built_in">echo</span> -n <span class="hljs-string">&quot;  &gt;&gt;&quot;</span><br>        <span class="hljs-comment"># 列出匹配的文件和目录,仅显示前10条</span><br>        selected_theme=$(<span class="hljs-built_in">ls</span> <span class="hljs-string">&quot;<span class="hljs-variable">$theme_dir</span>&quot;</span> | grep <span class="hljs-string">&quot;<span class="hljs-variable">$prefix</span>&quot;</span> | grep -m 1 <span class="hljs-string">&quot;<span class="hljs-variable">$current_input</span>&quot;</span>)<br>        <span class="hljs-built_in">ls</span> <span class="hljs-string">&quot;<span class="hljs-variable">$theme_dir</span>&quot;</span> | grep <span class="hljs-string">&quot;<span class="hljs-variable">$prefix</span>&quot;</span> | grep <span class="hljs-string">&quot;<span class="hljs-variable">$current_input</span>&quot;</span> | <span class="hljs-built_in">head</span> -10 | <span class="hljs-keyword">while</span> <span class="hljs-built_in">read</span> -r entry; <span class="hljs-keyword">do</span><br>            <span class="hljs-built_in">echo</span> -n <span class="hljs-string">&quot; <span class="hljs-variable">$entry</span>&quot;</span><br>        <span class="hljs-keyword">done</span><br>        <span class="hljs-comment"># 恢复光标位置</span><br>        tput rc<br>    <span class="hljs-keyword">done</span><br><br>    selected_theme=<span class="hljs-string">&quot;<span class="hljs-variable">$&#123;selected_theme//[$&#x27;\t\r\n &#x27;]&#125;</span>&quot;</span><br>    <span class="hljs-built_in">echo</span><br>    tput ed<br>    prompt <span class="hljs-string">&quot;您的<span class="hljs-variable">$&#123;prefix&#125;</span>选择为: <span class="hljs-variable">$&#123;selected_theme&#125;</span>&quot;</span> || selected_theme=<span class="hljs-string">&quot;&quot;</span><br>&#125;<br><span class="hljs-comment"># 主题选择工具,选择结果保存在 select_theme 变量中</span><br><span class="hljs-comment"># 用法 common_list_select &lt;data_list&gt; &lt;prompt&gt;</span><br><span class="hljs-comment"># data_list : 数据列表，一行一个选项</span><br><span class="hljs-comment"># prompt : 提示符，仅用于提示，无其他用途</span><br><span class="hljs-comment"># 输入表达式说明： 支持正则匹配，例如 ^abc$ 就只会匹配 abc 字符串，因为输入内容会作为grep的匹配表达式.</span><br><span class="hljs-keyword">function</span> <span class="hljs-function"><span class="hljs-title">common_list_select</span></span>() &#123;<br>    <span class="hljs-built_in">local</span> data_list=<span class="hljs-string">&quot;<span class="hljs-variable">$1</span>&quot;</span><br>    <span class="hljs-built_in">local</span> prefix=<span class="hljs-string">&quot;<span class="hljs-variable">$2</span>&quot;</span><br>    <span class="hljs-built_in">local</span> current_input=<span class="hljs-string">&quot;&quot;</span><br>    <span class="hljs-built_in">local</span> exit_loop=<span class="hljs-literal">false</span><br>    <span class="hljs-built_in">echo</span> -n <span class="hljs-string">&quot;输入<span class="hljs-variable">$&#123;prefix&#125;</span>名称:&quot;</span><br>    <span class="hljs-keyword">while</span> ! <span class="hljs-variable">$exit_loop</span>; <span class="hljs-keyword">do</span><br>        <span class="hljs-built_in">read</span> -t <span class="hljs-variable">$READ_TIMEOUT</span> -r -s -n 1 char<br><br>        <span class="hljs-keyword">if</span> [[ <span class="hljs-variable">$char</span> == $<span class="hljs-string">&#x27;\177&#x27;</span> ]]; <span class="hljs-keyword">then</span> <span class="hljs-comment"># 退格键</span><br>            current_input=<span class="hljs-string">&quot;<span class="hljs-variable">$&#123;current_input%?&#125;</span>&quot;</span><br>        <span class="hljs-keyword">elif</span> [[ <span class="hljs-string">&quot;<span class="hljs-variable">$char</span>&quot;</span> == <span class="hljs-string">&#x27;&#x27;</span> ]]; <span class="hljs-keyword">then</span> <span class="hljs-comment"># 输入为空时表示结束输入</span><br>            exit_loop=<span class="hljs-literal">true</span><br>        <span class="hljs-keyword">else</span> <span class="hljs-comment"># 将输入的字符追加到当前目录</span><br>            current_input=<span class="hljs-string">&quot;<span class="hljs-variable">$&#123;current_input&#125;</span><span class="hljs-variable">$&#123;char&#125;</span>&quot;</span><br>        <span class="hljs-keyword">fi</span><br><br>        <span class="hljs-comment"># 清除当前行并显示新内容</span><br>        tput ed  &amp;&amp; <span class="hljs-built_in">echo</span> -ne <span class="hljs-string">&quot;\r输入<span class="hljs-variable">$&#123;prefix&#125;</span>名称: <span class="hljs-variable">$&#123;current_input&#125;</span>&quot;</span><br><br>        <span class="hljs-keyword">if</span> [[ <span class="hljs-string">&quot;<span class="hljs-variable">$&#123;current_input&#125;</span>&quot;</span> == <span class="hljs-string">&quot;random&quot;</span> ]] ; <span class="hljs-keyword">then</span>  <span class="hljs-comment"># 随机选择一个主题</span><br>            maxn=`<span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;<span class="hljs-variable">$data_list</span>&quot;</span> |<span class="hljs-built_in">wc</span> -l`<br>            str_rand=<span class="hljs-string">&quot;<span class="hljs-subst">$(($RANDOM%$&#123;maxn&#125;)</span>)&quot;</span><br>            selected_theme=`<span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;<span class="hljs-variable">$data_list</span>&quot;</span> |sed -n <span class="hljs-string">&quot;<span class="hljs-variable">$&#123;str_rand&#125;</span>p&quot;</span>`<br>            <span class="hljs-built_in">break</span><br>        <span class="hljs-keyword">fi</span><br>        <span class="hljs-comment"># 保存当前光标位置</span><br>        tput sc<br>        <span class="hljs-comment"># 将光标移动到最后一行</span><br>        <span class="hljs-built_in">echo</span> -n <span class="hljs-string">&quot;  &gt;&gt;&quot;</span><br>        <span class="hljs-comment"># 列出匹配的文件和目录,仅显示前10条</span><br>        selected_theme=$(<span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;<span class="hljs-variable">$data_list</span>&quot;</span> | grep -m 1 <span class="hljs-string">&quot;<span class="hljs-variable">$current_input</span>&quot;</span>)<br>        <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;<span class="hljs-variable">$data_list</span>&quot;</span> | grep <span class="hljs-string">&quot;<span class="hljs-variable">$current_input</span>&quot;</span> | <span class="hljs-built_in">head</span> -10 | <span class="hljs-keyword">while</span> <span class="hljs-built_in">read</span> -r entry; <span class="hljs-keyword">do</span><br>            <span class="hljs-built_in">echo</span> -n <span class="hljs-string">&quot; <span class="hljs-variable">$entry</span>&quot;</span><br>        <span class="hljs-keyword">done</span><br>        <span class="hljs-comment"># 恢复光标位置</span><br>        tput rc<br>    <span class="hljs-keyword">done</span><br><br>    selected_theme=<span class="hljs-string">&quot;<span class="hljs-variable">$&#123;selected_theme//[$&#x27;\t\r\n &#x27;]&#125;</span>&quot;</span><br>    <span class="hljs-built_in">echo</span><br>    tput ed<br>    prompt <span class="hljs-string">&quot;您的<span class="hljs-variable">$&#123;prefix&#125;</span>选择为: <span class="hljs-variable">$&#123;selected_theme&#125;</span>&quot;</span> || selected_theme=<span class="hljs-string">&quot;&quot;</span><br>&#125;<br><br><span class="hljs-keyword">function</span> <span class="hljs-function"><span class="hljs-title">select_xresources_themes</span></span>() &#123;<br>    <span class="hljs-comment"># tput clear</span><br>    <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;配置 ~/.Xresources 主题&quot;</span><br>    tmp_path=~/.config/Xresources-themes<br>    [[ -r <span class="hljs-variable">$tmp_path</span> ]] &amp;&amp; prompt <span class="hljs-string">&quot;已经拷贝过 Xresources-themes 了，是否重新拷贝?&quot;</span> &amp;&amp; <span class="hljs-built_in">rm</span> -rf <span class="hljs-variable">$tmp_path</span><br>    [[ -r <span class="hljs-variable">$tmp_path</span> ]] || git <span class="hljs-built_in">clone</span> --depth 1 https://github.com/janoamaral/Xresources-themes <span class="hljs-variable">$tmp_path</span><br><br>    selected_theme=<span class="hljs-string">&quot;&quot;</span><br><br>    menu_head <span class="hljs-string">&quot;Xresources-themes主题(大量主题集合):&quot;</span><br>    menu_iteml base16   <span class="hljs-string">&quot;166个 base16 主题&quot;</span><br>    menu_iteml iterm2   <span class="hljs-string">&quot;162个 iterm2 主题&quot;</span><br>    menu_iteml xcolors  <span class="hljs-string">&quot;113个 xcolors 主题&quot;</span><br>    menu_iteml raven    <span class="hljs-string">&quot;8个 raven 主题&quot;</span><br>    menu_iteml nord     <span class="hljs-string">&quot;1个 nord 主题&quot;</span><br>    menu_iteml arcadia  <span class="hljs-string">&quot;6个 arcadia 主题&quot;</span><br>    menu_iteml hyper    <span class="hljs-string">&quot;2个 hyper 主题&quot;</span><br>    menu_iteml random   <span class="hljs-string">&quot;random 随机一个主题&quot;</span><br>    menu_iteml <span class="hljs-string">&quot;推荐: nord&quot;</span><br>    menu_tail<br>    <br>    common_select <span class="hljs-string">&quot;<span class="hljs-variable">$tmp_path</span>&quot;</span> <span class="hljs-string">&quot;&quot;</span> || <span class="hljs-built_in">return</span> 1<br>    [[ <span class="hljs-string">&quot;<span class="hljs-variable">$select_theme</span>&quot;</span> == <span class="hljs-string">&quot;&quot;</span> ]] &amp;&amp; select_theme=<span class="hljs-string">&quot;nord&quot;</span><br>    sed -E -i <span class="hljs-string">&quot;s|^(#include \&quot;.config/Xresources-themes/)(.*)\&quot;|\1<span class="hljs-variable">$&#123;selected_theme&#125;</span>\&quot;|g&quot;</span> ~/.Xresources<br>    xrdb ~/.Xresources &amp;&amp; i3-msg restart<br>    menu_iteml <span class="hljs-string">&quot;成功切换为 <span class="hljs-variable">$selected_theme</span> 主题&quot;</span><br>    menu_tail<br>&#125;<br><br><span class="hljs-keyword">function</span> <span class="hljs-function"><span class="hljs-title">select_rofi_themes</span></span>() &#123;<br>    <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;开始安装 rofi themes&quot;</span><br>    tmp_path=~/.config/rofi_themes<br>    [[ -r <span class="hljs-variable">$tmp_path</span> ]] &amp;&amp; prompt <span class="hljs-string">&quot;已经拷贝过 rofi-themes 了，是否重新拷贝?&quot;</span> &amp;&amp; <span class="hljs-built_in">rm</span> -rf <span class="hljs-variable">$tmp_path</span><br>    <span class="hljs-keyword">if</span> [[ ! -r <span class="hljs-variable">$tmp_path</span> ]] ; <span class="hljs-keyword">then</span><br>        git <span class="hljs-built_in">clone</span> --depth 1 https://github.com/switchToLinux/rofi_collection.git <span class="hljs-variable">$tmp_path</span><br>        <span class="hljs-built_in">cd</span> <span class="hljs-variable">$tmp_path</span> &amp;&amp; bash ./setup.sh &amp;&amp; <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;安装 rofi themes 成功&quot;</span><br>    <span class="hljs-keyword">fi</span><br>    tmp_path=~/.config/rofi<br>    <span class="hljs-comment">#选择rofi主题(Applet/Launcher/Powermenus)</span><br>    menu_head <span class="hljs-string">&quot;rofi-themes主题(大量主题集合):&quot;</span><br>    menu_iteml launchers   <span class="hljs-string">&quot;启动器主题&quot;</span><br>    menu_iteml applets    <span class="hljs-string">&quot;小插件主题&quot;</span><br>    menu_iteml <span class="hljs-string">&quot;推荐: 根据官网 https://github.com/adi1090x/rofi 示例进行选择适合自己的主题&quot;</span><br>    menu_iteml <span class="hljs-string">&quot;提示:将替换 \$mod+d 快捷键对应执行命令为启动器脚本&quot;</span><br>    menu_iteml <span class="hljs-string">&quot;提示:将替换 \$mod+shift+l 快捷键对应执行命令为powermenu&quot;</span><br>    menu_tail<br><br>    <span class="hljs-keyword">if</span> prompt <span class="hljs-string">&quot;选择 启动器:&quot;</span> ; <span class="hljs-keyword">then</span><br>        menu_head <span class="hljs-string">&quot;提示&quot;</span> <span class="hljs-string">&quot;样式比较多，很难一一描述,仅列举常用几个&quot;</span><br>        menu_iteml <span class="hljs-string">&quot;type-1/style-10&quot;</span> <span class="hljs-string">&quot;水平顶部条状布局&quot;</span><br>        menu_iteml <span class="hljs-string">&quot;type-2/style-6&quot;</span> <span class="hljs-string">&quot;垂直靠左布局，类似侧边栏效果&quot;</span><br>        menu_iteml <span class="hljs-string">&quot;type-3/style-9&quot;</span> <span class="hljs-string">&quot;垂直靠右布局，类似侧边栏效果&quot;</span><br>        menu_iteml <span class="hljs-string">&quot;type-4/style-10&quot;</span> <span class="hljs-string">&quot;垂直靠右布局，类似侧边栏效果&quot;</span><br>        menu_iteml <span class="hljs-string">&quot;type-5/style-3&quot;</span> <span class="hljs-string">&quot;垂直居中布局&quot;</span><br>        menu_iteml <span class="hljs-string">&quot;type-6/style-5&quot;</span> <span class="hljs-string">&quot;垂直居中布局&quot;</span><br>        menu_iteml <span class="hljs-string">&quot;type-7/style-4&quot;</span> <span class="hljs-string">&quot;垂直靠左布局，类似侧边栏效果&quot;</span><br>        selected_theme=<span class="hljs-string">&quot;&quot;</span><br>        common_select <span class="hljs-string">&quot;<span class="hljs-variable">$tmp_path</span>/launchers&quot;</span> <span class="hljs-string">&quot;type&quot;</span> || <span class="hljs-built_in">return</span> 1<br>        theme_name=<span class="hljs-string">&quot;<span class="hljs-variable">$&#123;selected_theme&#125;</span>&quot;</span><br>        [[ <span class="hljs-string">&quot;<span class="hljs-variable">$theme_name</span>&quot;</span> == <span class="hljs-string">&quot;&quot;</span> ]] &amp;&amp; theme_name=<span class="hljs-string">&quot;type-3&quot;</span><br>        selected_theme=<span class="hljs-string">&quot;&quot;</span><br>        common_select <span class="hljs-string">&quot;<span class="hljs-variable">$tmp_path</span>/launchers/<span class="hljs-variable">$&#123;theme_name&#125;</span>/&quot;</span> <span class="hljs-string">&quot;style&quot;</span> || <span class="hljs-built_in">return</span> 1<br>        style_name=`<span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;<span class="hljs-variable">$selected_theme</span>&quot;</span> | sed <span class="hljs-string">&#x27;s/.rasi//g&#x27;</span>`<br>        [[ <span class="hljs-string">&quot;<span class="hljs-variable">$style_name</span>&quot;</span> == <span class="hljs-string">&quot;&quot;</span> ]] &amp;&amp; style_name=<span class="hljs-string">&quot;style-1&quot;</span><br><br>        <span class="hljs-comment">#sed -i &quot;s|^bindsym \$mod+d exec.*|bindsym \$mod+d exec --no-startup-id  ~/.config/rofi/launchers/$&#123;theme_name&#125;/launcher.sh|g&quot; ~/.config/i3/config ~/.config/i3/config.d/*</span><br>        sed -i <span class="hljs-string">&quot;s|^theme=&#x27;style.*&#x27;|theme=&#x27;<span class="hljs-variable">$&#123;style_name&#125;</span>&#x27;|g&quot;</span> ~/.config/rofi/launchers/<span class="hljs-variable">$&#123;theme_name&#125;</span>/launcher.sh<br>        <span class="hljs-built_in">cd</span> ~/.config/rofi/scripts &amp;&amp; <span class="hljs-built_in">ln</span> -sf ../launchers/<span class="hljs-variable">$&#123;theme_name&#125;</span>/launcher.sh launcher<br>    <span class="hljs-keyword">fi</span><br>    <span class="hljs-keyword">if</span> prompt <span class="hljs-string">&quot;选择 applets:&quot;</span> ; <span class="hljs-keyword">then</span><br>        menu_head <span class="hljs-string">&quot;选择 applets 类型(默认type-3):&quot;</span><br>        menu_iteml <span class="hljs-string">&quot;type-1&quot;</span> <span class="hljs-string">&quot;垂直方向显示，图标+文字,居中显示&quot;</span><br>        menu_iteml <span class="hljs-string">&quot;type-2&quot;</span> <span class="hljs-string">&quot;水平显示内容，图标，居中显示&quot;</span><br>        menu_iteml <span class="hljs-string">&quot;type-3&quot;</span> <span class="hljs-string">&quot;垂直方向显示, 仅图标,靠右侧边缘显示&quot;</span><br>        menu_iteml <span class="hljs-string">&quot;type-4&quot;</span> <span class="hljs-string">&quot;水平显示内容，图标，居中显示,顶部有空白显示区域&quot;</span><br>        menu_iteml <span class="hljs-string">&quot;type-5&quot;</span> <span class="hljs-string">&quot;垂直显示内容，图标+文字，居中显示,左侧有空白显示区域&quot;</span><br>        selected_theme=<span class="hljs-string">&quot;&quot;</span><br>        common_select <span class="hljs-string">&quot;<span class="hljs-variable">$tmp_path</span>/applets&quot;</span> <span class="hljs-string">&quot;type&quot;</span> || <span class="hljs-built_in">return</span> 1<br>        theme_name=<span class="hljs-string">&quot;<span class="hljs-variable">$&#123;selected_theme&#125;</span>&quot;</span><br>        [[ <span class="hljs-string">&quot;<span class="hljs-variable">$theme_name</span>&quot;</span> == <span class="hljs-string">&quot;&quot;</span> ]] &amp;&amp; theme_name=<span class="hljs-string">&quot;type-3&quot;</span><br>        menu_head <span class="hljs-string">&quot;选择 applets 样式(默认style-1):&quot;</span><br>        menu_iteml <span class="hljs-string">&quot;style-1&quot;</span> <span class="hljs-string">&quot;无圆角类型，按钮长方形&quot;</span><br>        menu_iteml <span class="hljs-string">&quot;style-2&quot;</span> <span class="hljs-string">&quot;小弧度圆角类型，按钮长方形&quot;</span><br>        menu_iteml <span class="hljs-string">&quot;style-3&quot;</span> <span class="hljs-string">&quot;大弧度圆角类型，按钮椭圆形&quot;</span><br>        selected_theme=<span class="hljs-string">&quot;&quot;</span><br>        common_select <span class="hljs-string">&quot;<span class="hljs-variable">$tmp_path</span>/applets/<span class="hljs-variable">$&#123;theme_name&#125;</span>/&quot;</span> <span class="hljs-string">&quot;style&quot;</span> || <span class="hljs-built_in">return</span> 1<br>        style_name=`<span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;<span class="hljs-variable">$selected_theme</span>&quot;</span> | sed <span class="hljs-string">&#x27;s/.rasi//g&#x27;</span>`<br>        [[ <span class="hljs-string">&quot;<span class="hljs-variable">$style_name</span>&quot;</span> == <span class="hljs-string">&quot;&quot;</span> ]] &amp;&amp; style_name=<span class="hljs-string">&quot;style-1&quot;</span><br>        <span class="hljs-comment"># change theme  type=&quot;$HOME/.config/rofi/applets/type-1&quot; # style=&#x27;style-1.rasi&#x27;</span><br>        sed -E -i <span class="hljs-string">&quot;s|config/rofi/applets/type-([0-9]+)|config/rofi/applets/<span class="hljs-variable">$&#123;theme_name&#125;</span>|g;s|=&#x27;style-([0-9]+).rasi|=&#x27;<span class="hljs-variable">$&#123;style_name&#125;</span>.rasi|g&quot;</span> ~/.config/rofi/applets/shared/theme.bash<br>        menu_head <span class="hljs-string">&quot;选择 applets 颜色方案(默认为 nord):&quot;</span><br>        selected_theme=<span class="hljs-string">&quot;&quot;</span><br>        common_select <span class="hljs-string">&quot;<span class="hljs-variable">$tmp_path</span>/colors&quot;</span> || <span class="hljs-built_in">return</span> 1<br>        color_name=<span class="hljs-string">&quot;<span class="hljs-variable">$&#123;selected_theme&#125;</span>&quot;</span><br>        [[ <span class="hljs-string">&quot;<span class="hljs-variable">$color_name</span>&quot;</span> == <span class="hljs-string">&quot;&quot;</span> ]] &amp;&amp; color_name=<span class="hljs-string">&quot;nord.rasi&quot;</span><br>        <br>        <span class="hljs-comment"># change color @import &quot;~/.config/rofi/colors/onedark.rasi&quot;</span><br>        sed -E -i <span class="hljs-string">&quot;s|config/rofi/colors/(.*.rasi)|config/rofi/colors/<span class="hljs-variable">$&#123;color_name&#125;</span>|g&quot;</span> ~/.config/rofi/applets/shared/colors.rasi<br>        menu_iteml <span class="hljs-string">&quot;切换 applets 为 <span class="hljs-variable">$theme_name</span> 主题, <span class="hljs-variable">$&#123;style_name&#125;</span> 类型, <span class="hljs-variable">$&#123;color_name&#125;</span> 颜色方案&quot;</span><br>    <span class="hljs-keyword">fi</span><br>    <span class="hljs-keyword">if</span> prompt <span class="hljs-string">&quot;选择 powermenu:&quot;</span> ; <span class="hljs-keyword">then</span><br>        menu_head <span class="hljs-string">&quot;选择 powermenu 主题类型(默认 type-4)&quot;</span><br>        menu_iteml <span class="hljs-string">&quot;type-1&quot;</span> <span class="hljs-string">&quot;居中显示，图标+文字&quot;</span><br>        menu_iteml <span class="hljs-string">&quot;type-2&quot;</span> <span class="hljs-string">&quot;居中显示，仅图标&quot;</span><br>        menu_iteml <span class="hljs-string">&quot;type-3&quot;</span> <span class="hljs-string">&quot;全屏显示，垂直布局，黑色背景&quot;</span><br>        menu_iteml <span class="hljs-string">&quot;type-4&quot;</span> <span class="hljs-string">&quot;全屏显示，水平布局，渐变色背景&quot;</span><br>        menu_iteml <span class="hljs-string">&quot;type-5&quot;</span> <span class="hljs-string">&quot;居中显示，水平布局，顶部有空白显示区域&quot;</span><br>        menu_iteml <span class="hljs-string">&quot;type-6&quot;</span> <span class="hljs-string">&quot;居中显示，垂直布局，左侧有空白显示区域&quot;</span><br>        selected_theme=<span class="hljs-string">&quot;&quot;</span><br>        common_select <span class="hljs-string">&quot;<span class="hljs-variable">$tmp_path</span>/powermenu&quot;</span> <span class="hljs-string">&quot;type&quot;</span> || <span class="hljs-built_in">return</span> 1<br>        theme_name=<span class="hljs-string">&quot;<span class="hljs-variable">$&#123;selected_theme&#125;</span>&quot;</span><br>        [[ <span class="hljs-string">&quot;<span class="hljs-variable">$theme_name</span>&quot;</span> == <span class="hljs-string">&quot;&quot;</span> ]] &amp;&amp; theme_name=<span class="hljs-string">&quot;type-3&quot;</span><br>        menu_head <span class="hljs-string">&quot;选择 powermenu <span class="hljs-variable">$theme_name</span> 的样式(默认为type-4,style-5)&quot;</span><br>        menu_iteml <span class="hljs-string">&quot;提示&quot;</span> <span class="hljs-string">&quot;不同type下样式无法归类描述,仅列举典型描述&quot;</span><br>        menu_iteml <span class="hljs-string">&quot;type-1,style-4 居中显示，按钮垂直布局&quot;</span><br>        menu_iteml <span class="hljs-string">&quot;type-1,style-5 居中显示，按钮水平布局&quot;</span><br>        menu_iteml <span class="hljs-string">&quot;type-2,style-4 垂直靠右布局&quot;</span><br>        menu_iteml <span class="hljs-string">&quot;type-2,style-5 垂直靠左布局，圆角按钮&quot;</span><br>        menu_iteml <span class="hljs-string">&quot;type-2,style-6 水平底部布局，圆角按钮&quot;</span><br>        menu_iteml <span class="hljs-string">&quot;type-2,style-8 垂直靠右布局,背景透明，圆角按钮&quot;</span><br>        menu_iteml <span class="hljs-string">&quot;type-2,style-10 水平居中布局,背景透明，圆角按钮&quot;</span><br>        menu_iteml <span class="hljs-string">&quot;type-3,style-1 水平居中布局,圆角按钮&quot;</span><br>        menu_iteml <span class="hljs-string">&quot;type-4,style-1 水平全屏布局,背景透明，圆角按钮&quot;</span><br>        menu_iteml <span class="hljs-string">&quot;type-4,style-3 水平居中显示,背景透明，圆角按钮&quot;</span><br>        menu_iteml <span class="hljs-string">&quot;type-4,style-4 水平全屏布局,背景蓝粉色渐变&quot;</span><br>        menu_iteml <span class="hljs-string">&quot;type-4,style-5 水平全屏布局,背景蓝黑色渐变&quot;</span><br>        menu_iteml <span class="hljs-string">&quot;type-5,style-4 上下布局,顶部有空白显示图片区域&quot;</span><br>        menu_iteml <span class="hljs-string">&quot;type-6,style-4 上下布局,顶部有空白显示图片区域&quot;</span><br><br>        selected_theme=<span class="hljs-string">&quot;&quot;</span><br>        common_select <span class="hljs-string">&quot;<span class="hljs-variable">$tmp_path</span>/powermenu/<span class="hljs-variable">$&#123;theme_name&#125;</span>/&quot;</span> <span class="hljs-string">&quot;style&quot;</span> || <span class="hljs-built_in">return</span> 1<br>        style_name=`<span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;<span class="hljs-variable">$selected_theme</span>&quot;</span> | sed <span class="hljs-string">&#x27;s/.rasi//g&#x27;</span>`<br>        [[ <span class="hljs-string">&quot;<span class="hljs-variable">$style_name</span>&quot;</span> == <span class="hljs-string">&quot;&quot;</span> ]] &amp;&amp; style_name=<span class="hljs-string">&quot;style-1&quot;</span><br><br>        <span class="hljs-comment">#sed -i &quot;s|^bindsym \$mod+shift+l exec.*|bindsym \$mod+shift+l exec --no-startup-id  ~/.config/rofi/powermenu/$&#123;theme_name&#125;/powermenu.sh|g&quot; ~/.config/i3/config ~/.config/i3/config.d/*</span><br>        sed -E -i <span class="hljs-string">&quot;s|=&#x27;style-[0-9]+&#x27;|=&#x27;<span class="hljs-variable">$&#123;style_name&#125;</span>&#x27;|g&quot;</span> ~/.config/rofi/powermenu/<span class="hljs-variable">$&#123;theme_name&#125;</span>/powermenu.sh<br>        <span class="hljs-built_in">cd</span> ~/.config/rofi/scripts &amp;&amp; <span class="hljs-built_in">ln</span> -sf ../powermenu/<span class="hljs-variable">$&#123;theme_name&#125;</span>/powermenu.sh powermenu<br>        menu_iteml <span class="hljs-string">&quot;切换 powermenu 为 <span class="hljs-variable">$theme_name</span> 主题, 应用 <span class="hljs-variable">$&#123;style_name&#125;</span> 类型&quot;</span><br>    <span class="hljs-keyword">fi</span><br>    i3-msg restart<br>    menu_tail<br>&#125;<br><span class="hljs-keyword">function</span> <span class="hljs-function"><span class="hljs-title">select_polybar_themes</span></span>() &#123;<br>    prompt <span class="hljs-string">&quot;开始设置 polybar 主题&quot;</span> || <span class="hljs-built_in">return</span> 1<br>    tmp_path=<span class="hljs-string">&quot;<span class="hljs-variable">$HOME</span>/.config/polybar_themes&quot;</span><br>    [[ ! -r <span class="hljs-variable">$tmp_path</span> ]] &amp;&amp; <span class="hljs-built_in">return</span> 1<br>    prompt <span class="hljs-string">&quot;更新 polybar 主题到最新版&quot;</span> &amp;&amp; <span class="hljs-built_in">cd</span> <span class="hljs-variable">$tmp_path</span> &amp;&amp; git pull &amp;&amp; <span class="hljs-built_in">cd</span> -<br>    menu_head <span class="hljs-string">&quot;选择 polybar_themes 主题(默认zioer)&quot;</span><br>    selected_theme=<span class="hljs-string">&quot;&quot;</span><br>    common_select <span class="hljs-string">&quot;<span class="hljs-variable">$tmp_path</span>/themes&quot;</span><br>    theme_name=<span class="hljs-string">&quot;<span class="hljs-variable">$&#123;selected_theme&#125;</span>&quot;</span><br>    [[ <span class="hljs-string">&quot;<span class="hljs-variable">$theme_name</span>&quot;</span> == <span class="hljs-string">&quot;&quot;</span> ]] &amp;&amp; theme_name=<span class="hljs-string">&quot;zioer&quot;</span><br>    menu_head <span class="hljs-string">&quot;请为 <span class="hljs-variable">$theme_name</span> 主题选择 prompt样式(默认triangle)&quot;</span><br>    style_list=<span class="hljs-string">&quot;`grep &#x27;^sep_.*_left = &#x27; ~/.config/polybar_themes/template/icons.ini | awk -F_ &#x27;&#123; a[<span class="hljs-variable">$2</span>]++&#125;END&#123;for(i in a)&#123; printf(&quot;</span>%s\n<span class="hljs-string">&quot;,i) &#125;&#125;&#x27;`&quot;</span><br>    selected_theme=<span class="hljs-string">&quot;&quot;</span><br>    common_list_select <span class="hljs-string">&quot;<span class="hljs-variable">$style_list</span>&quot;</span> <span class="hljs-string">&quot;prompt样式&quot;</span><br>    prompt_style=<span class="hljs-string">&quot;<span class="hljs-variable">$&#123;selected_theme&#125;</span>&quot;</span><br>    [[ <span class="hljs-string">&quot;<span class="hljs-variable">$prompt_style</span>&quot;</span> == <span class="hljs-string">&quot;&quot;</span> ]] &amp;&amp; prompt_style=<span class="hljs-string">&quot;triangle&quot;</span><br>    menu_head <span class="hljs-string">&quot;请为 <span class="hljs-variable">$theme_name</span> 主题选择 颜色搭配方案(默认zioer)&quot;</span><br>    menu_iteml <span class="hljs-string">&quot;zioer&quot;</span> <span class="hljs-string">&quot;zioer颜色方案默认使用 ~/.Xresources 颜色方案&quot;</span><br>    menu_tail<br>    selected_theme=<span class="hljs-string">&quot;&quot;</span><br>    common_select <span class="hljs-string">&quot;<span class="hljs-variable">$tmp_path</span>/colors&quot;</span><br>    color_name=<span class="hljs-string">&quot;`echo <span class="hljs-variable">$&#123;selected_theme&#125;</span> | sed &#x27;s/.ini$//g&#x27;`&quot;</span><br>    [[ <span class="hljs-string">&quot;<span class="hljs-variable">$color_name</span>&quot;</span> == <span class="hljs-string">&quot;&quot;</span> ]] &amp;&amp; color_name=<span class="hljs-string">&quot;zioer&quot;</span><br>    <br>    sed -i <span class="hljs-string">&quot;s|^exec.*config/polybar_themes.*|exec_always --no-startup-id  ~/.config/polybar_themes/launch.sh <span class="hljs-variable">$&#123;theme_name&#125;</span> <span class="hljs-variable">$&#123;prompt_style&#125;</span> <span class="hljs-variable">$&#123;color_name&#125;</span> &gt; /dev/null 2&gt;\&amp;1|g&quot;</span> ~/.config/i3/config ~/.config/i3/config.d/*<br>    menu_iteml <span class="hljs-string">&quot;已切换polybar_themes 为 <span class="hljs-variable">$&#123;theme_name&#125;</span> 主题, <span class="hljs-variable">$&#123;prompt_style&#125;</span> 样式, <span class="hljs-variable">$&#123;color_name&#125;</span> 颜色搭配&quot;</span><br>    i3-msg restart<br>&#125;<br><span class="hljs-keyword">function</span> <span class="hljs-function"><span class="hljs-title">install_clipmenu_deps</span></span>() &#123;<br>    <span class="hljs-built_in">command</span> -v apt-get &amp;&amp; sudo apt-get install   -y xsel libxfixes-dev<br>    <span class="hljs-built_in">command</span> -v dnf     &amp;&amp; sudo dnf install       -y xsel libXfixes-devel<br>    <span class="hljs-built_in">command</span> -v zypper  &amp;&amp; sudo zypper install    -y xsel libXfixes-devel<br>    <span class="hljs-built_in">command</span> -v pacman  &amp;&amp; sudo pacman -S --needed --noconfirm --needed xsel libxfixes<br>&#125;<br><span class="hljs-keyword">function</span> <span class="hljs-function"><span class="hljs-title">install_clipmenu</span></span>() &#123;<br>    prompt <span class="hljs-string">&quot;安装 clipmenu 剪切板菜单&quot;</span><br>    <span class="hljs-comment"># 依赖安装</span><br>    install_clipmenu_deps<br>    tmp_path=<span class="hljs-string">&quot;<span class="hljs-variable">$tmp_dir</span>/clipnotify&quot;</span><br>    [[ -d <span class="hljs-variable">$tmp_path</span> ]] || git <span class="hljs-built_in">clone</span> https://github.com/cdown/clipnotify.git <span class="hljs-variable">$tmp_path</span><br>    <span class="hljs-built_in">cd</span> <span class="hljs-variable">$tmp_path</span> &amp;&amp; make &amp;&amp; sudo PREFIX=/usr make install<br>    tmp_path=<span class="hljs-string">&quot;<span class="hljs-variable">$tmp_dir</span>/clipmenu&quot;</span><br>    [[ -r <span class="hljs-string">&quot;<span class="hljs-variable">$tmp_path</span>&quot;</span> ]] || git <span class="hljs-built_in">clone</span> https://github.com/cdown/clipmenu <span class="hljs-variable">$tmp_path</span><br>    <span class="hljs-built_in">cd</span> <span class="hljs-variable">$tmp_path</span> &amp;&amp; sudo make install<br>&#125;<br><span class="hljs-keyword">function</span> <span class="hljs-function"><span class="hljs-title">install_xscreensaver_deps</span></span>() &#123;<br>    <span class="hljs-built_in">command</span> -v apt-get &amp;&amp; sudo apt-get install   -y perl intltool libxext-dev libxi-dev libxt-dev libxft-dev libxinerama-dev \<br>                        libxrandr-dev libxxf86vm-dev libgl-dev libgl1-mesa-dev libglu1-mesa-dev libgle3-dev libgtk2.0-dev  libgtk-3-dev libgdk-pixbuf-xlib-2.0-dev \<br>                        libxml2 libxml2-dev libpam0g libpam0g-dev dbus libsystemd-dev <br>    <span class="hljs-built_in">command</span> -v dnf     &amp;&amp; sudo dnf install       -y perl intltool libXext-devel libXi-devel libXft-devel libXinerama-devel \<br>                        libXrandr-devel libXxf86vm-devel mesa-libGL-devel gtk2-devel gdk-pixbuf2-devel gdk-pixbuf2-xlib-devel \<br>                        libxml2-devel pam pam-devel dbus systemd-devel<br>    <span class="hljs-built_in">command</span> -v zypper  &amp;&amp; sudo zypper install    -y perl intltool libXext-devel libXi-devel libXft-devel libXinerama-devel \<br>                        libXrandr-devel libXxf86vm-devel Mesa-libGL-devel libgtk-2_0-0 gtk2-devel gdk-pixbuf-devel gdk-pixbuf-xlib-devel \<br>                        libxml2-devel pam pam-devel dbus-1 systemd-devel<br>    <span class="hljs-built_in">command</span> -v pacman  &amp;&amp; sudo pacman -S --needed --noconfirm --needed perl intltool libxext libxi libxft libxinerama \<br>                        libxrandr libxxf86vm mesa glu gtk2 gdk-pixbuf2 gdk-pixbuf-xlib libxml2 pam dbus systemd intltool<br>    install_urxvt_ext<br>&#125;<br><span class="hljs-keyword">function</span> <span class="hljs-function"><span class="hljs-title">compile_xscreensaver</span></span>() &#123;<br>    str_version=<span class="hljs-string">&quot;6.06&quot;</span><br>    url=<span class="hljs-string">&quot;https://www.jwz.org/xscreensaver/xscreensaver-<span class="hljs-variable">$&#123;str_version&#125;</span>.tar.gz&quot;</span><br>    filename=<span class="hljs-string">&quot;<span class="hljs-variable">$&#123;tmp_dir&#125;</span>/xscreensaver-<span class="hljs-variable">$&#123;str_version&#125;</span>.tar.gz&quot;</span><br>    [[ ! -f <span class="hljs-variable">$&#123;filename&#125;</span> ]] &amp;&amp; curl -L -o <span class="hljs-variable">$&#123;filename&#125;</span> <span class="hljs-variable">$&#123;url&#125;</span><br>    tmp_path=<span class="hljs-string">&quot;<span class="hljs-variable">$&#123;tmp_dir&#125;</span>/xscreensaver-<span class="hljs-variable">$&#123;str_version&#125;</span>&quot;</span><br>    [[ ! -r <span class="hljs-variable">$&#123;tmp_path&#125;</span> ]] &amp;&amp; tar axvf <span class="hljs-variable">$&#123;filename&#125;</span> -C <span class="hljs-variable">$&#123;tmp_dir&#125;</span><br>    install_xscreensaver_deps<br>    <span class="hljs-built_in">cd</span> <span class="hljs-variable">$tmp_path</span> &amp;&amp; ./configure --prefix=/usr &amp;&amp; make -j$(<span class="hljs-built_in">nproc</span>) &amp;&amp; sudo make install<br>    [[ <span class="hljs-string">&quot;$?&quot;</span> != <span class="hljs-string">&quot;0&quot;</span> ]] &amp;&amp; <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;安装失败!找到错误原因后重新尝试!&quot;</span> &amp;&amp; <span class="hljs-built_in">return</span> 2<br>    [[ ! -x /usr/bin/xscreensaver ]] &amp;&amp; <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;安装失败!没找到 xscreensaver 命令&quot;</span> &amp;&amp; <span class="hljs-built_in">return</span> 3<br>    <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;恭喜您! xscreensaver 安装成功!&quot;</span><br>&#125;<br><span class="hljs-keyword">function</span> <span class="hljs-function"><span class="hljs-title">config_resolution</span></span>() &#123;<br>    <span class="hljs-comment"># 自适应分辨率 1080p/2k/4k</span><br>    <span class="hljs-comment"># 获取屏幕分辨率</span><br>    resolution=$(xrandr | grep <span class="hljs-string">&#x27; connected primary&#x27;</span> | awk <span class="hljs-string">&#x27;&#123;print $4&#125;&#x27;</span> | awk -F<span class="hljs-string">&#x27;[x+]&#x27;</span> <span class="hljs-string">&#x27;&#123; print $2 &#125;&#x27;</span>)<br>    <span class="hljs-comment"># 分辨率检测并设置polybar高度</span><br>    <span class="hljs-keyword">if</span> [[ <span class="hljs-variable">$resolution</span> -le 1080 ]] ; <span class="hljs-keyword">then</span> <span class="hljs-comment"># 老旧非高分屏幕 11英寸-13英寸</span><br>        dpi=96<br>        font_size=10<br>    <span class="hljs-keyword">elif</span> [[ <span class="hljs-variable">$resolution</span> -le 1440 ]]; <span class="hljs-keyword">then</span><br>        dpi=140<br>        font_size=12<br>    <span class="hljs-keyword">else</span> <span class="hljs-comment"># elif [[ $resolution -gt 1440 ]]; then</span><br>        dpi=196<br>        font_size=12<br>    <span class="hljs-keyword">fi</span><br>    <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;resolution: <span class="hljs-variable">$resolution</span> , dpi: <span class="hljs-variable">$dpi</span> , font_size: <span class="hljs-variable">$font_size</span>&quot;</span><br>    <span class="hljs-comment"># 修改跟分辨率相关配置</span><br>    sed -i <span class="hljs-string">&quot;s/Xft.dpi:.*/Xft.dpi: <span class="hljs-variable">$dpi</span>/g&quot;</span> ~/.Xresources<br>    sed -E -i <span class="hljs-string">&quot;s/dpi:.*;/dpi: <span class="hljs-variable">$dpi</span>;/g;s/font: \&quot;([^\&quot;]+)( [0-9]+ *)\&quot;;/font: \&quot;\1 <span class="hljs-variable">$font_size</span>\&quot;;/g&quot;</span> ~/.config/rofi/config.rasi<br>&#125;<br><span class="hljs-keyword">function</span> <span class="hljs-function"><span class="hljs-title">check_terminal_list</span></span>() &#123;<br>    <span class="hljs-keyword">for</span> tname <span class="hljs-keyword">in</span> x-terminal-emulator mate-terminal gnome-terminal terminator xfce4-terminal urxvt rxvt termit Eterm aterm uxterm xterm roxterm termite lxterminal terminology st qterminal lilyterm tilix terminix konsole kitty guake tilda alacritty hyper wezterm<br>    <span class="hljs-keyword">do</span><br>        <span class="hljs-built_in">command</span> -v <span class="hljs-variable">$tname</span> &gt; /dev/null 2&gt;&amp;1  &amp;&amp; <span class="hljs-built_in">echo</span> <span class="hljs-variable">$tname</span><br>    <span class="hljs-keyword">done</span><br>&#125;<br><span class="hljs-keyword">function</span> <span class="hljs-function"><span class="hljs-title">select_terminal</span></span>() &#123;<br>    selected_theme=<span class="hljs-string">&quot;&quot;</span><br>    prompt <span class="hljs-string">&quot;选择Terminal终端(默认`echo_greenr i3-sensible-terminal`)&quot;</span> || <span class="hljs-built_in">return</span> 1<br>    terminal_list=`check_terminal_list`<br>    <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;当前可用终端: <span class="hljs-variable">$terminal_list</span>&quot;</span><br>    common_list_select <span class="hljs-string">&quot;<span class="hljs-variable">$terminal_list</span>&quot;</span> <span class="hljs-string">&quot;terminal&quot;</span><br>    <span class="hljs-keyword">if</span> [[ <span class="hljs-string">&quot;<span class="hljs-variable">$selected_theme</span>&quot;</span> != <span class="hljs-string">&quot;&quot;</span> ]] ; <span class="hljs-keyword">then</span><br>        sed -i <span class="hljs-string">&quot;s#^set \$TERMINAL .*#set \$TERMINAL <span class="hljs-variable">$selected_theme</span>#g&quot;</span> ~/.config/i3/config ~/.config/i3/config.d/*<br>        <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;已经设置新的 TERMINAL 终端工具，重新加载i3wm后生效&quot;</span><br>        i3-msg restart<br>    <span class="hljs-keyword">fi</span><br>&#125;<br><span class="hljs-keyword">function</span> <span class="hljs-function"><span class="hljs-title">update_i3config</span></span>() &#123;<br>    <span class="hljs-comment"># 更新 i3config 到最新版本</span><br>    tmp_path=<span class="hljs-string">&quot;<span class="hljs-variable">$tmp_dir</span>/i3config&quot;</span><br>    install_path=<span class="hljs-string">&quot;<span class="hljs-variable">$0</span>&quot;</span><br>    curl -L -o <span class="hljs-variable">$tmp_path</span> https://raw.githubusercontent.com/switchToLinux/dotfiles/main/i3config<br>    [[ <span class="hljs-string">&quot;$?&quot;</span> == <span class="hljs-string">&quot;0&quot;</span> ]] &amp;&amp; <span class="hljs-built_in">mv</span> <span class="hljs-variable">$&#123;install_path&#125;</span> <span class="hljs-variable">$&#123;install_path&#125;</span>.old &amp;&amp; <span class="hljs-built_in">mv</span> <span class="hljs-variable">$tmp_path</span> <span class="hljs-variable">$&#123;install_path&#125;</span><br>    <span class="hljs-built_in">chmod</span> +x <span class="hljs-variable">$&#123;install_path&#125;</span><br>    <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;已更新 i3config 到最新版本 <span class="hljs-variable">$&#123;I3CONFIG_VERSION&#125;</span>&quot;</span><br>&#125;<br><br><span class="hljs-keyword">function</span> <span class="hljs-function"><span class="hljs-title">get_dm_list</span></span>() &#123;<br>    <span class="hljs-keyword">for</span> dm <span class="hljs-keyword">in</span> lightdm sddm gdm<br>    <span class="hljs-keyword">do</span><br>        <span class="hljs-built_in">echo</span> <span class="hljs-variable">$dm</span><br>    <span class="hljs-keyword">done</span><br>&#125;<br><span class="hljs-keyword">function</span> <span class="hljs-function"><span class="hljs-title">install_xinit</span></span>() &#123;<br>    <span class="hljs-comment"># 选择DM</span><br>    selected_theme=<span class="hljs-string">&quot;&quot;</span><br>    prompt <span class="hljs-string">&quot;选择DM显示管理器(默认`echo_greenr lightdm`)&quot;</span> || <span class="hljs-built_in">return</span> 1<br>    dm_list=<span class="hljs-string">&quot;`get_dm_list`&quot;</span><br>    <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;当前可用终端: <span class="hljs-variable">$dm_list</span>&quot;</span><br>    common_list_select <span class="hljs-string">&quot;<span class="hljs-variable">$dm_list</span>&quot;</span> <span class="hljs-string">&quot;显示管理器&quot;</span><br>    [[ <span class="hljs-string">&quot;<span class="hljs-variable">$selected_theme</span>&quot;</span> == <span class="hljs-string">&quot;&quot;</span> ]] &amp;&amp; selected_theme=<span class="hljs-string">&quot;lightdm&quot;</span><br><br>    <span class="hljs-comment"># 安装X窗口系统和DM</span><br>    <span class="hljs-keyword">if</span> [[ <span class="hljs-string">&quot;<span class="hljs-variable">$selected_theme</span>&quot;</span> == <span class="hljs-string">&quot;lightdm&quot;</span> ]] ; <span class="hljs-keyword">then</span><br>        <span class="hljs-built_in">command</span> -v apt-get &amp;&amp; sudo apt-get install   -y xinit lightdm lightdm-gtk-greeter<br>        <span class="hljs-built_in">command</span> -v dnf     &amp;&amp; sudo dnf install       -y xinit lightdm lightdm-gtk<br>        <span class="hljs-built_in">command</span> -v zypper  &amp;&amp; sudo zypper install    -y xinit lightdm lightdm-gtk-greeter<br>        <span class="hljs-built_in">command</span> -v pacman  &amp;&amp; sudo pacman -S --needed --noconfirm --needed xorg-xinit lightdm lightdm-gtk-greeter<br>    <span class="hljs-keyword">elif</span> [[ <span class="hljs-string">&quot;<span class="hljs-variable">$selected_theme</span>&quot;</span> == <span class="hljs-string">&quot;sddm&quot;</span> ]] ; <span class="hljs-keyword">then</span><br>        <span class="hljs-built_in">command</span> -v apt-get &amp;&amp; sudo apt-get install   -y xinit sddm<br>        <span class="hljs-built_in">command</span> -v dnf     &amp;&amp; sudo dnf install       -y xinit sddm<br>        <span class="hljs-built_in">command</span> -v zypper  &amp;&amp; sudo zypper install    -y xinit sddm<br>        <span class="hljs-built_in">command</span> -v pacman  &amp;&amp; sudo pacman -S --needed --noconfirm --needed xorg-xinit sddm<br>    <span class="hljs-keyword">elif</span> [[ <span class="hljs-string">&quot;<span class="hljs-variable">$selected_theme</span>&quot;</span> == <span class="hljs-string">&quot;gdm&quot;</span> ]] ; <span class="hljs-keyword">then</span><br>        <span class="hljs-built_in">command</span> -v apt-get &amp;&amp; sudo apt-get install   -y xinit gdm3<br>        <span class="hljs-built_in">command</span> -v dnf     &amp;&amp; sudo dnf install       -y xinit gdm<br>        <span class="hljs-built_in">command</span> -v zypper  &amp;&amp; sudo zypper install    -y xinit gdm<br>        <span class="hljs-built_in">command</span> -v pacman  &amp;&amp; sudo pacman -S --needed --noconfirm --needed xorg-xinit gdm<br>    <span class="hljs-keyword">fi</span><br>    <span class="hljs-comment"># 自启动lightdm</span><br>    sudo systemctl <span class="hljs-built_in">enable</span> --now <span class="hljs-variable">$selected_theme</span>.service<br>    <span class="hljs-comment"># 禁止gettty服务</span><br>    sudo systemctl <span class="hljs-built_in">disable</span> getty@.service<br>&#125;<br><span class="hljs-keyword">function</span> <span class="hljs-function"><span class="hljs-title">install_tmux</span></span>() &#123;  <span class="hljs-comment"># Terminal终端会话管理工具,类似Screen</span><br>    <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;正在执行 install_tmux&quot;</span><br>    prompt <span class="hljs-string">&quot;开始安装 tmux&quot;</span> || <span class="hljs-built_in">return</span> 1<br>    <span class="hljs-built_in">command</span> -v tmux &gt;/dev/null &amp;&amp; ! prompt <span class="hljs-string">&quot;已经安装过 tmux ，继续安装?&quot;</span> &amp;&amp; <span class="hljs-built_in">return</span> 0<br>    <span class="hljs-comment"># basic config with plugin</span><br>    <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;配置tmux&quot;</span><br>    create_symlink <span class="hljs-variable">$dotfiles_path</span>/tmux/tmux.conf ~/.tmux.conf<br><br>    <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;开始安装tmux插件&quot;</span><br>    <span class="hljs-comment"># 配置 tmux</span><br>    <span class="hljs-built_in">command</span> -v apt-get &amp;&amp; sudo apt-get install   -y tmux<br>    <span class="hljs-built_in">command</span> -v dnf     &amp;&amp; sudo dnf install       -y tmux<br>    <span class="hljs-built_in">command</span> -v zypper  &amp;&amp; sudo zypper install    -y tmux<br>    <span class="hljs-built_in">command</span> -v pacman  &amp;&amp; sudo pacman -S --needed --noconfirm --needed tmux<br>    <span class="hljs-built_in">mkdir</span> -p <span class="hljs-variable">$HOME</span>/.tmux/plugins/<br>    <span class="hljs-built_in">cd</span> <span class="hljs-variable">$HOME</span>/.tmux/plugins/<br>    git <span class="hljs-built_in">clone</span> https://github.com/tmux-plugins/tpm.git<br>    git <span class="hljs-built_in">clone</span> https://github.com/tmux-plugins/tmux-resurrect.git<br>    git <span class="hljs-built_in">clone</span> https://github.com/tmux-plugins/tmux-continuum.git<br>    <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;成功执行 install_tmux&quot;</span><br>&#125;<br><br><span class="hljs-keyword">function</span> <span class="hljs-function"><span class="hljs-title">usage_shortcuts</span></span>() &#123;<br>    <span class="hljs-built_in">echo</span> <span class="hljs-variable">$line_feed</span><br>    <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;i3wm常用快捷键列表:&quot;</span><br>    <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;  打开 vscode : \$mod+c&quot;</span><br>    <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;  打开 terminal : \$mod+Enter&quot;</span><br>    <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;  打开 google-chrome :  \$mod+g&quot;</span><br>    <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;  打开 firefox :  \$mod+b&quot;</span><br>    <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;  隐藏/显示 顶部bar ： \$mod+ + n&quot;</span><br>    <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;  隐藏/显示 底部bar ： \$mod+ + m&quot;</span><br>    <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;  工作区双屏切换: \$mod+x&quot;</span><br>    <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;  系统退出: \$mod+l&quot;</span><br>    <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;  显示菜单: \$mod+d&quot;</span><br>    <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;  显示窗口列表菜单: \$mod+Tab&quot;</span><br>    <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;  切换窗口布局类型(split/stacking/tabbed): \$mod+e&quot;</span><br>    <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;  切换垂直/水平方向布局窗口: \$mod+v&quot;</span><br>    <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;  焦点窗口的焦点切换到父节点: \$mod+a&quot;</span><br>    <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;  焦点窗口的焦点切换到子节点: \$mod+shift+a&quot;</span><br>    <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;  全屏显示当前焦点窗口: \$mod+f&quot;</span><br>    <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;  关闭焦点窗口: \$mod+q&quot;</span><br>    <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;  移动焦点窗口: \$mod+Shift+方向键&quot;</span><br>    <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;  暂存工作区-暂存当前窗口: \$mod+shift+minus(减号)&quot;</span><br>    <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;  暂存工作区-显示暂存窗口: \$mod+minus (多个暂存窗口会逐个切换)&quot;</span><br>    <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;  浮动窗口-切换焦点窗口悬浮/普通 : \$mod+shift+space&quot;</span><br>    <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;  浮动窗口-移动浮动窗口上下左右: \$mod+Shift+方向键&quot;</span><br>    <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;  浮动窗口Sticky-焦点窗口切换: \$mod+Shift+s&quot;</span><br>    <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;  浮动窗口Sticky-切换为置顶悬浮小窗口: \$mod+shift+i (45 ppt 45 ppt =&gt; position 30,30 px )&quot;</span><br>    <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;  配置变更-重新加载: \$mod+Shift+c&quot;</span><br>    <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;  配置变更-i3wm重启: \$mod+Shift+r&quot;</span><br>    <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;  锁屏操作-i3lock: \$mod+l&quot;</span><br>    <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;  重启关机等电源管理操作: \$mod+Shift+l&quot;</span><br>    <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;  开启resize模式： \$mod+r， 方向键调整，确认按Enter,取消按Esc&quot;</span><br>    <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;  窗口间边距: 增加\$mod+Backspace ， 减小\$mod+Shift+Backspace&quot;</span><br>    <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;  窗口外边距: 增加\$mod+= ， 减小\$mod+Shift+=&quot;</span><br>    <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;  焦点窗口透明度修改: 增加5%\$mod+[ ，减小5%\$mod+]&quot;</span><br>&#125;<br><br><span class="hljs-keyword">function</span> <span class="hljs-function"><span class="hljs-title">auto_install_all</span></span>() &#123;<br>    <span class="hljs-comment"># 自动安装</span><br>    default_confirm=<span class="hljs-string">&quot;yes&quot;</span><br>    READ_TIMEOUT=5<br>    install_xinit<br>    compile_i3wm             <br>    compile_polybar          <br>    compile_picom            <br>    compile_i3lock_color     <br>    install_clipmenu         <br>    compile_rofi             <br>    compile_xscreensaver      <br>    install_urxvt_ext        <br>    install_others           <br>    install_dotfiles         <br>    select_polybar_themes    <br>    select_rofi_themes       <br>    select_xresources_themes <br>    config_resolution        <br>    install_tmux<br>&#125;<br><span class="hljs-keyword">function</span> <span class="hljs-function"><span class="hljs-title">show_menu_install</span></span>() &#123;<br>    menu_head <span class="hljs-string">&quot;i3config <span class="hljs-variable">$&#123;I3CONFIG_VERSION&#125;</span> 安装选项菜单&quot;</span><br>    menu_item 1 i3wm<br>    menu_item 2 polybar<br>    menu_item 3 picom<br>    menu_item 4 i3lock_color<br>    menu_item 5 tmux<br>    menu_item 6 rofi<br>    menu_item 7 xscreensaver<br>    menu_item 8 compile_mpd<br>    menu_item 9 other[feh/mpd/dunst.]<br>    menu_item 0 dotfiles<br>    menu_tail<br>    menu_item h 查看常用快捷键列表<br>    menu_item p select_polybar_themes<br>    menu_item r select_rofi_themes<br>    menu_item s select_xresources_themes<br>    menu_item t select_terminal<br>    menu_item x match_resolution<br>    menu_item y install_xinit<br>    menu_item z 自动安装<br>    menu_tail<br>    menu_item u update_i3config<br>    menu_item q 返回上级菜单<br>    menu_tail<br>&#125;<br><span class="hljs-keyword">function</span> <span class="hljs-function"><span class="hljs-title">start_main</span></span>() &#123; <span class="hljs-comment"># 安装菜单选择</span><br>    <span class="hljs-keyword">while</span> <span class="hljs-literal">true</span><br>    <span class="hljs-keyword">do</span><br>        show_menu_install<br>        <span class="hljs-built_in">read</span> -t <span class="hljs-variable">$READ_TIMEOUT</span> -r -n 1 -e  -p <span class="hljs-string">&quot;`echo_greenr 请选择:` <span class="hljs-variable">$&#123;PMT&#125;</span> &quot;</span> str_answer<br>        <span class="hljs-keyword">case</span> <span class="hljs-string">&quot;<span class="hljs-variable">$str_answer</span>&quot;</span> <span class="hljs-keyword">in</span><br>            1) compile_i3wm             ;;<br>            2) compile_polybar          ;;<br>            3) compile_picom            ;;<br>            4) compile_i3lock_color     ;;<br>            5) install_tmux             ;;<br>            6) compile_rofi             ;;<br>            7) compile_xscreensaver     ;;<br>            8) compile_mpd              ;;<br>            9) install_others           ;;<br>            0) install_dotfiles         ;;<br>            p) select_polybar_themes    ;;<br>            r) select_rofi_themes       ;;<br>            s) select_xresources_themes ;;<br>            t) select_terminal          ;;<br>            x) config_resolution        ;;<br>            y) install_xinit            ;;<br>            z) auto_install_all         ;;<br>            u) update_i3config          ;;<br>            h) usage_shortcuts          ;;<br>            q|<span class="hljs-string">&quot;&quot;</span>) <span class="hljs-built_in">return</span> 0              ;;  <span class="hljs-comment"># 返回上级菜单</span><br>            *) redr_line <span class="hljs-string">&quot;没这个选择[<span class="hljs-variable">$str_answer</span>],搞错了再来.&quot;</span> ;;<br>        <span class="hljs-keyword">esac</span><br>    <span class="hljs-keyword">done</span><br>&#125;<br><br><br><span class="hljs-comment">####### Main process #################################</span><br>menu_head <span class="hljs-string">&quot;<span class="hljs-variable">$WELCOME</span>&quot;</span><br>check_term      <span class="hljs-comment"># 检测TERM终端信息</span><br>check_basic     <span class="hljs-comment"># 基础依赖命令检测与安装</span><br><br><span class="hljs-keyword">if</span> [ <span class="hljs-string">&quot;<span class="hljs-variable">$#</span>&quot;</span> -eq 0 ]; <span class="hljs-keyword">then</span>  <span class="hljs-comment"># 无参数情况:进入菜单选择</span><br>    start_main<br><span class="hljs-keyword">else</span>  <span class="hljs-comment"># 命令执行模式(执行后退出)</span><br>    <span class="hljs-built_in">command</span>=<span class="hljs-string">&quot;<span class="hljs-variable">$1</span>&quot;</span><br>    <span class="hljs-keyword">case</span> <span class="hljs-string">&quot;<span class="hljs-variable">$command</span>&quot;</span> <span class="hljs-keyword">in</span><br>        h|<span class="hljs-built_in">help</span>|-h)<br>            usage_shortcuts ;;<br>        i3)<br>            install_i3wm ;;<br>        polybar)<br>            compile_polybar ;;<br>        polybar_themes)<br>            install_polybar_themes ;;<br>    <span class="hljs-keyword">esac</span><br><span class="hljs-keyword">fi</span><br><br>menu_head <span class="hljs-string">&quot;<span class="hljs-variable">$&#123;SEE_YOU&#125;</span>&quot;</span><br></code></pre></td></tr></table></figure>
<h1 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h1><p><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/642302828">https://zhuanlan.zhihu.com/p/642302828</a></p>
<p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/shadow-/p/17572589.html">https://www.cnblogs.com/shadow-/p/17572589.html</a></p>
<p><a target="_blank" rel="noopener" href="https://github.com/Airblader/i3?tab=readme-ov-file">一些i3的配置</a></p>
<p><a target="_blank" rel="noopener" href="https://github.com/ysc2/dotfile">一些i3的配置</a></p>
<p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/shadow-/p/17572589.html">关于i3的消息</a></p>

                
              </div>
            
            <hr/>
            <div>
              <div class="post-metas my-3">
  
    <div class="post-meta mr-3 d-flex align-items-center">
      <i class="iconfont icon-category"></i>
      

<span class="category-chains">
  
  
    
      <span class="category-chain">
        
  <a href="/categories/Linux/" class="category-chain-item">Linux</a>
  
  
    <span>></span>
    
  <a href="/categories/Linux/%E6%9D%82%E9%A1%B9/" class="category-chain-item">杂项</a>
  
  

  

      </span>
    
  
</span>

    </div>
  
  
    <div class="post-meta">
      <i class="iconfont icon-tags"></i>
      
        <a href="/tags/%E8%BD%AC%E8%BD%BD/" class="print-no-link">#转载</a>
      
    </div>
  
</div>


              
  

  <div class="license-box my-3">
    <div class="license-title">
      <div>i3自动安装</div>
      <div>https://ysc2.github.io/ysc2.github.io/2024/03/03/i3自动安装/</div>
    </div>
    <div class="license-meta">
      
        <div class="license-meta-item">
          <div>作者</div>
          <div>Ysc</div>
        </div>
      
      
        <div class="license-meta-item license-meta-date">
          <div>发布于</div>
          <div>2024年3月3日</div>
        </div>
      
      
      
        <div class="license-meta-item">
          <div>许可协议</div>
          <div>
            
              
              
                <a class="print-no-link" target="_blank" href="https://creativecommons.org/licenses/by/4.0/">
                  <span class="hint--top hint--rounded" aria-label="BY - 署名">
                    <i class="iconfont icon-by"></i>
                  </span>
                </a>
              
            
          </div>
        </div>
      
    </div>
    <div class="license-icon iconfont"></div>
  </div>



              
                <div class="post-prevnext my-3">
                  <article class="post-prev col-6">
                    
                    
                      <a href="/2024/03/07/%E6%91%84%E5%83%8F%E5%A4%B4%E6%A8%A1%E5%9D%97/" title="摄像头模块">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile">摄像头模块</span>
                        <span class="visible-mobile">上一篇</span>
                      </a>
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/2024/03/01/%E8%99%9A%E6%8B%9F%E6%9C%BA%E5%AE%89%E8%A3%85Arch-Linux%E8%AE%B0%E5%BD%95/" title="虚拟机安装Arch-Linux记录">
                        <span class="hidden-mobile">虚拟机安装Arch-Linux记录</span>
                        <span class="visible-mobile">下一篇</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
          </article>
        </div>
      </div>
    </div>

    <div class="side-col d-none d-lg-block col-lg-2">
      
  <aside class="sidebar" style="margin-left: -1rem">
    <div id="toc">
  <p class="toc-header">
    <i class="iconfont icon-list"></i>
    <span>目录</span>
  </p>
  <div class="toc-body" id="toc-body"></div>
</div>



  </aside>


    </div>
  </div>
</div>





  



  



  



  



  







    

    
      <a id="scroll-top-button" aria-label="TOP" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">搜索</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v" for="local-search-input">关键词</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>

    

    
  </main>

  <footer>
    <div class="footer-inner">
  
    <div class="footer-content">
       <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> <i class="iconfont icon-love"></i> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a> 
    </div>
  
  
  
  
</div>

  </footer>

  <!-- Scripts -->
  
  <script  src="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://lib.baomitu.com/jquery/3.6.4/jquery.min.js" ></script>
<script  src="https://lib.baomitu.com/twitter-bootstrap/4.6.1/js/bootstrap.min.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>


  <script  src="https://lib.baomitu.com/typed.js/2.0.12/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var subtitle = document.getElementById('subtitle');
      if (!subtitle || !typing) {
        return;
      }
      var text = subtitle.getAttribute('data-typed-text');
      
        typing(text);
      
    })(window, document);
  </script>




  
    <script  src="/js/img-lazyload.js" ></script>
  




  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/tocbot/4.20.1/tocbot.min.js', function() {
    var toc = jQuery('#toc');
    if (toc.length === 0 || !window.tocbot) { return; }
    var boardCtn = jQuery('#board-ctn');
    var boardTop = boardCtn.offset().top;

    window.tocbot.init(Object.assign({
      tocSelector     : '#toc-body',
      contentSelector : '.markdown-body',
      linkClass       : 'tocbot-link',
      activeLinkClass : 'tocbot-active-link',
      listClass       : 'tocbot-list',
      isCollapsedClass: 'tocbot-is-collapsed',
      collapsibleClass: 'tocbot-is-collapsible',
      scrollSmooth    : true,
      includeTitleTags: true,
      headingsOffset  : -boardTop,
    }, CONFIG.toc));
    if (toc.find('.toc-list-item').length > 0) {
      toc.css('visibility', 'visible');
    }

    Fluid.events.registerRefreshCallback(function() {
      if ('tocbot' in window) {
        tocbot.refresh();
        var toc = jQuery('#toc');
        if (toc.length === 0 || !tocbot) {
          return;
        }
        if (toc.find('.toc-list-item').length > 0) {
          toc.css('visibility', 'visible');
        }
      }
    });
  });
</script>


  <script src=https://lib.baomitu.com/clipboard.js/2.0.11/clipboard.min.js></script>

  <script>Fluid.plugins.codeWidget();</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/anchor-js/4.3.1/anchor.min.js', function() {
    window.anchors.options = {
      placement: CONFIG.anchorjs.placement,
      visible  : CONFIG.anchorjs.visible
    };
    if (CONFIG.anchorjs.icon) {
      window.anchors.options.icon = CONFIG.anchorjs.icon;
    }
    var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
    var res = [];
    for (var item of el) {
      res.push('.markdown-body > ' + item.trim());
    }
    if (CONFIG.anchorjs.placement === 'left') {
      window.anchors.options.class = 'anchorjs-link-left';
    }
    window.anchors.add(res.join(', '));

    Fluid.events.registerRefreshCallback(function() {
      if ('anchors' in window) {
        anchors.removeAll();
        var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
        var res = [];
        for (var item of el) {
          res.push('.markdown-body > ' + item.trim());
        }
        if (CONFIG.anchorjs.placement === 'left') {
          anchors.options.class = 'anchorjs-link-left';
        }
        anchors.add(res.join(', '));
      }
    });
  });
</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js', function() {
    Fluid.plugins.fancyBox();
  });
</script>


  <script>Fluid.plugins.imageCaption();</script>

  <script  src="/js/local-search.js" ></script>





<!-- 主题的启动项，将它保持在最底部 -->
<!-- the boot of the theme, keep it at the bottom -->
<script  src="/js/boot.js" ></script>


  

  <noscript>
    <div class="noscript-warning">博客在允许 JavaScript 运行的环境下浏览效果更佳</div>
  </noscript>
</body>
</html>
